jQuery(document).ready(function(){if(jQuery('#companyRegistrationForm').length){jQuery("#companyRegistrationForm").submit(function(e){e.preventDefault();var existing_listing=jQuery("input[name='has_existing_listing']:checked").val();if(existing_listing==1){existingListingValidationLoop(!1)}});jQuery('#companyRegistrationForm').bootstrapValidator({live:'enabled',message:'This value is not valid',submitButton:'$companyRegistrationForm button[type="submit"]',submitHandler:function(validator,form,submitButton){var existing_listing=jQuery("input[name='has_existing_listing']:checked").val();if(existing_listing==1&&existingListingValidationLoop(!0)===!1){jQuery('form#companyRegistrationForm button').prop('disabled',!1).css('opacity','1').html('Register');return!1}
var $form=jQuery(form),formData=new FormData(),params=$form.serializeArray();jQuery('.login-error').hide();jQuery.each(params,function(i,val){formData.append(val.name,val.value)});var btn_text=jQuery('form#companyRegistrationForm button[type="submit"]').html();refreshURL=window.location.href;jQuery('form#companyRegistrationForm button').prop('disabled',!0).css('opacity','0.5').html('Submitting...');jQuery('#company-registration-form .error-message').html('').hide();jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=registerNewCompany",type:'POST',dataType:"json",data:formData,processData:!1,contentType:!1,success:function(data){if(data.status=='success'){window.location=siteUrl+"/thank-you-register/"}else{jQuery('form#companyRegistrationForm button').prop('disabled',!1).css('opacity','1').html('Register');if(data.message!=''&&data.message!==typeof undefined){jQuery('#company-registration-form .error-message').html(data.message).show()}else{jQuery('.login-error').show()}}},error:function(xhr,ajaxOptions,thrownError){internalServerErrorMesg('#companyRegistrationForm',refreshURL,'alert-warning',!0,btn_text);console.log(xhr.status);console.log(xhr.responseText);console.log(thrownError)}});return!1},feedbackIcons:{valid:'glyphicon glyphicon-ok',invalid:'glyphicon glyphicon-remove',validating:'glyphicon glyphicon-refresh'},fields:{user_firstname:{validators:{notEmpty:{message:'The Company name is required and cannot be empty'}}},user_email:{validators:{notEmpty:{message:'The email address is required'},emailAddress:{message:'The input is not a valid email address'}}},user_pass:{validators:{notEmpty:{message:'The password is required and cannot be empty'}}}}})}
if(jQuery('#editCompanyProfileForm').length){jQuery('#editCompanyProfileForm').bootstrapValidator({live:'enabled',message:'This value is not valid',submitButton:'$editCompanyProfileForm input[type="submit"]',submitHandler:function(validator,form,submitButton){var $form=jQuery(form),formData=new FormData(),params=$form.serializeArray(),picture=$form.find('[name="profile_picture"]')[0].files[0];jQuery.each(params,function(i,val){formData.append(val.name,val.value)});formData.append('profile_picture',picture);jQuery('form#editCompanyProfileForm input[type="submit"]').prop('disabled',!0).css('opacity','0.5').val('Submitting...');refreshURL=wpUrl+'/company-edit-profile/';jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=editCompanyProfile",type:'POST',dataType:"json",data:formData,processData:!1,contentType:!1,success:function(data){if(data.status=='success'){internalServerErrorMesg('#editCompanyProfileForm','','alert-success',!0,'Update',0,data.message);if(data.profile_picture!=''){profile_img_src=wpUrl+'/wp-content/'+data.profile_picture;jQuery('.listing-logo img').attr('src',profile_img_src)}
jQuery('h1.company-name').html(jQuery('input[name="user_firstname"]').val())}else if(data.status=='fail'&&data.message!=''){internalServerErrorMesg('#editCompanyProfileForm','','alert-danger',!0,'Update',0,data.message)}else{internalServerErrorMesg('#editCompanyProfileForm',refreshURL,'alert-info')}
jQuery('form#editCompanyProfileForm input[type="submit"]').prop('disabled',!1).css('opacity','1').val('Update')},error:function(xhr,ajaxOptions,thrownError){internalServerErrorMesg('#editCompanyProfileForm',refreshURL,'alert-info');console.log(xhr.status);console.log(xhr.responseText);console.log(thrownError)}});return!1},feedbackIcons:{valid:'glyphicon glyphicon-ok',invalid:'glyphicon glyphicon-remove',validating:'glyphicon glyphicon-refresh'},fields:{user_email:{validators:{callback:{message:"Please enter an email address that matches with your company's domain.",callback:function(value,validator){var regex=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;var old_domain=jQuery("input[name='user_email']").attr('data-email-ext');if(value!=''){if(regex.test(value)){var new_domain=value.split('@');if(new_domain.length>1&&is_valid_domain_name(new_domain[1])===!1){return!1}else{return!0}}else{return!1}}else{return!0}}}}},user_firstname:{validators:{notEmpty:{message:'The Comapny name is required and cannot be empty'}}},profile_picture:{validators:{file:{extension:'jpeg,png,jpg',type:'image/jpeg,image/png',maxSize:1*1024*1024,message:'The selected picture is not valid, it should be .jpg/.png and 5 MB at maximum.'}}},user_website:{validators:{uri:{message:'Website url is not valid'}}}}})}
jQuery(document).on('keyup','.validate_this',function(e){var _this=jQuery(this);if(_this.closest('.custom_validation_row').attr('id')){var div_id=_this.closest('.custom_validation_row').attr('id');customValidationOfWholeRow(div_id,!1)}else{var div_id=_this.closest('.custom_validation').attr('id');customValidation(_this,div_id)}});jQuery(document).on('change','select.validate_this',function(e){var _this=jQuery(this);if(_this.closest('.custom_validation_row').attr('id')){var div_id=_this.closest('.custom_validation_row').attr('id');customValidationOfWholeRow(div_id,!1)}else{var div_id=_this.closest('.custom_validation').attr('id');if(div_id!='preferred_days_div'&&div_id!='preferred_timings_div'&&div_id!='providerCategories_div')
customValidation(_this,div_id)}});if(jQuery('#companyChangePassForm').length){jQuery('#companyChangePassForm').bootstrapValidator({live:'enabled',message:'This value is not valid',submitButton:'$companyChangePassForm button[type="submit"]',submitHandler:function(validator,form,submitButton){var formData=jQuery(form).serialize();var btn_text=jQuery('form#companyChangePassForm input[type="submit"]').val();refreshURL=window.location.href;jQuery('form#companyChangePassForm input[type="submit"]').prop('disabled',!0).css('opacity','0.5').val('Submitting...');jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=companyChangePassword",type:'POST',dataType:"json",data:formData,success:function(data){jQuery('form#companyChangePassForm input[type="submit"]').prop('disabled',!1).css('opacity','1').val('Change Password');jQuery('.msgsent').html('');if(data.status=='success'){window.location=siteUrl+"/company-account/"}else{if(data.message){jQuery('.msgsent').html(data.message)}else jQuery('.msgsent').html('System has some problem. Please try again.')}},error:function(xhr,ajaxOptions,thrownError){internalServerErrorMesg('#companyChangePassForm',refreshURL,'alert-warning',!0,btn_text);console.log(xhr.status);console.log(xhr.responseText);console.log(thrownError)}});return!1},feedbackIcons:{valid:'glyphicon glyphicon-ok',invalid:'glyphicon glyphicon-remove',validating:'glyphicon glyphicon-refresh'},fields:{current_password:{validators:{notEmpty:{message:'The new password is required and cannot be empty'}}},newpassword:{validators:{notEmpty:{message:'The new password is required and cannot be empty'},identical:{field:'confirmPassword',message:'The password and its confirm are not the same'}}},confirmPassword:{validators:{notEmpty:{message:'The  re-enter password is required and cannot be empty'},identical:{field:'newpassword',message:'The password and its confirm are not the same'}}}},})}
jQuery('.add_more_listing').on('click',function(e){addMoreCompExistListing(jQuery('.comp_exst_list_row:first'))});jQuery('.comp_exst_list_wrapper .remove').on('click',function(){if(jQuery('.comp_exst_list_row').length==1)
addMoreCompExistListing(jQuery('.comp_exst_list_row:first'));jQuery(this).parent().parent().remove()});jQuery('.validate_this_list_url').on('keyup',function(e){var _this=jQuery(this);existingListingValidation(_this)});if(jQuery('#compExistingListingForm').length){jQuery("#compExistingListingForm").submit(function(e){e.preventDefault();loggedinUserExtListValidationLoop(!1)});jQuery('#compExistingListingForm').bootstrapValidator({live:'enabled',message:'This value is not valid',submitButton:'$compExistingListingForm button[type="submit"]',submitHandler:function(validator,form,submitButton){jQuery('.existinglisting-mesg').hide();jQuery('.existinglisting-error-mesg').hide();if(loggedinUserExtListValidationLoop(!0)===!1){jQuery('form#compExistingListingForm button[type="submit"]').prop('disabled',!1).css('opacity','1').html('Register');return!1}
var $form=jQuery(form),formData=new FormData(),params=$form.serializeArray();jQuery('.login-error').hide();jQuery.each(params,function(i,val){formData.append(val.name,val.value)});var btn_text=jQuery('form#compExistingListingForm button[type="submit"]').html();refreshURL=window.location.href;jQuery('form#compExistingListingForm button[type="submit"]').prop('disabled',!0).css('opacity','0.5').html('Submitting...');jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=companyExistingListingRequest",cache:!1,type:'POST',data:formData,processData:!1,contentType:!1,dataType:'json',success:function(data){jQuery('form#compExistingListingForm button[type="submit"]').prop('disabled',!1).css('opacity','1').html('Send');if(data.status=='success'){jQuery('.existinglisting-success-mesg').show();jQuery('.comp_exst_list_wrapper .remove').each(function(index,element){jQuery(this).trigger("click")})}else{jQuery('.existinglisting-error-mesg').show().html(data.message)}},error:function(xhr,ajaxOptions,thrownError){internalServerErrorMesg('#loginform',refreshURL,'alert-warning',!0,btn_text);console.log('error occured');console.log(xhr.status);console.log(xhr.responseText);console.log(thrownError)}});return!1},feedbackIcons:{valid:'glyphicon glyphicon-ok',invalid:'glyphicon glyphicon-remove',validating:'glyphicon glyphicon-refresh'},fields:{}})}
jQuery('#haveYouExistingListing').on('hidden.bs.modal',function(){jQuery('.comp_exst_list_wrapper .remove').each(function(index,element){jQuery(this).trigger("click")})});jQuery('.delete-user-related-record').on('click',function(e){if(confirm("Are you sure you want to delete the selected record?")){var post_id=jQuery(this).attr('data-delete-id');var error_div=jQuery(this).attr('data-error-div');jQuery('.'+error_div).html('');jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=deleteUserRelatedPosts",type:'POST',dataType:'json',data:'&post_id='+post_id,success:function(data){if(data.status=='success'){jQuery('#user_data_tr_'+post_id).remove();jQuery('.'+error_div).html('<div class="alert alert-success">'+data.message+'</div>')}else{jQuery('.'+error_div).html('<div class="alert alert-danger">'+data.message+'</div>')}},error:function(xhr,ajaxOptions,thrownError){console.log(xhr.status);console.log(xhr.responseText);console.log(thrownError)}})}
return!1});jQuery('.multi_accounts_add_btn').on('click',function(e){addMoreAccountsRows(jQuery('.multi_users_accounts_row:first'))});jQuery('.multi_users_accounts_wrapper .remove').on('click',function(){if(jQuery('.multi_users_accounts_row').length==1)
addMoreAccountsRows(jQuery('.multi_users_accounts_row:first'));jQuery(this).parent().parent().parent().remove()});if(jQuery('#addMultiAccountsForm').length){jQuery("#addMultiAccountsForm").submit(function(e){e.preventDefault();jQuery('.accounts-error-mesg').html('');jQuery('.accounts-success-mesg').html('');formData=jQuery('#addMultiAccountsForm').serialize();jQuery.ajax({type:'POST',url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=addUserMultiAccounts",dataType:'json',data:formData,beforeSend:function(){jQuery('.disable-btn').attr('disabled',!0)},success:function(data){var response_data=data.response_data;var status=data.status;if(status=='success'){var t=jQuery('#multi_accounts_datatable').DataTable();var i;for(i=0;i<response_data.length;i++){var row_id=response_data[i].id
var user_email=response_data[i].user_email;var j;var k=1;var posts_array='';for(j=0;j<response_data[i].posts.length;j++){var post_text=response_data[i].posts[j][2];var account_listing_pk=response_data[i].posts[j][1];var single_post='<tr><td>'+post_text+'</tr></td>';posts_array+=single_post;k++}
var combined_posts=posts_array;combined_posts='<table class="table border mb0 listings_row_td_'+row_id+'" width="100%" cellspacing="0" role="grid">'+combined_posts+'</div>';t.row.add([user_email,combined_posts,'<a class="pink edit-user-account" href="JavaScript:Void(0);" data-account-id="'+row_id+'"  data-toggle="modal" data-target="#editMultipleAccounts"><i class="fa fa-pencil"></i> Edit</a> | <a class="pink delete-user-account" href="JavaScript:Void(0);" data-delete-id="'+row_id+'"><i class="fa fa-remove"></i> Delete</a>']).node().id='user_data_tr_'+row_id;t.draw(!1)}
jQuery('.accounts-success-mesg').html('<div class="alert alert-success" role="alert">Added successfully</div>');jQuery('#addMultipleAccounts').modal('toggle');jQuery('.disable-btn').removeAttr("disabled");jQuery('.multi_users_accounts_wrapper .remove').each(function(index,element){jQuery(this).trigger("click")})}else{var error_html='<ul>';for(i=0;i<response_data.length;i++){error_html+='<li>'+response_data[i]+'</li>'}
error_html+='</ul>';jQuery('.accounts-error-mesg').html('<div class="alert alert-danger" role="alert">'+error_html+'</div>');jQuery('.disable-btn').removeAttr("disabled")}},error:function(){console.log("An error occur durring request")}})})}
jQuery('#addMultipleAccounts').on('hidden.bs.modal',function(){jQuery('.accounts-error-mesg').html('').hide();jQuery('.multi_users_accounts_wrapper .remove').each(function(index,element){jQuery(this).trigger("click")})});jQuery(document).on('click','.delete-user-account',function(e){if(confirm("Are you sure you want to delete the selected record?")){var user_id=jQuery(this).attr('data-delete-id');jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=deleteUserAccounts",type:'POST',dataType:'json',data:'&user_id='+user_id,success:function(data){if(data.status=='success'){jQuery('#user_data_tr_'+user_id).remove();jQuery('.accounts-success-mesg').html('<div class="alert alert-success">'+data.message+'</div>')}else{jQuery('.accounts-success-mesg').html('<div class="alert alert-danger">'+data.message+'</div>')}},error:function(xhr,ajaxOptions,thrownError){console.log(xhr.status);console.log(xhr.responseText);console.log(thrownError)}})}
return!1});jQuery(document).on('click','.edit-user-account',function(e){var account_id=jQuery(this).attr('data-account-id');jQuery('.account_detail_div').hide();jQuery('.account_detail_loader').show();jQuery('#delete-listings').val('');jQuery('#hidden_account_id').val(account_id);jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=getAccountListings",type:'POST',data:'&account_id='+account_id,success:function(data){jQuery('.account_detail_loader').hide();jQuery('.account_detail_div').show();jQuery('.account_detail_div').html(data);jQuery('.edit_accounts_btns').show()},error:function(xhr,ajaxOptions,thrownError){console.log(xhr.status);console.log(xhr.responseText);console.log(thrownError)}})});if(jQuery('#editMultiAccountsForm').length){jQuery(document).on("change",".account_detail_div input:checkbox",function(){var _this=jQuery(this);var checked_box_value='';if(_this.hasClass('db_value')){checked_box_value=_this.val();var delete_listings=jQuery('#delete-listings').val();if(this.checked){if(delete_listings!=''){var ids=delete_listings.split(',');if(jQuery.inArray(checked_box_value,ids)){ids=arrayRemove(ids,checked_box_value)}}}else{var ids=delete_listings.split(',');ids.push(checked_box_value)}
ids=ids.join(",");jQuery('#delete-listings').val(ids)}});jQuery("#editMultiAccountsForm").submit(function(e){e.preventDefault();jQuery('.editaccounts-error-mesg').html('');jQuery('.accounts-success-mesg').html('');formData=jQuery('#editMultiAccountsForm').serialize();jQuery.ajax({type:'POST',url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=editMultiAccountsListings",dataType:'json',data:formData,beforeSend:function(){jQuery('.disable-btn').attr('disabled',!0)},success:function(data){var response_data=data.response_data;var status=data.status;if(status=='success'){var row_id=jQuery('#hidden_account_id').val();jQuery('.listings_row_td_'+row_id).text('');var i;for(i=0;i<response_data.length;i++){var j;var k=1;var posts_array='';for(j=0;j<response_data[i].posts.length;j++){post_text='';var post_text=jQuery(document).find('#editMultiAccountsForm .post_text_'+response_data[i].posts[j][0]).text();var account_listing_pk=response_data[i].posts[j][1];posts_array+='<tr><td>'+post_text+'</td></tr>';k++}}
var combined_posts=posts_array;jQuery('.listings_row_td_'+row_id).html(combined_posts);jQuery('.accounts-success-mesg').html('<div class="alert alert-success" role="alert">Updated successfully</div>');jQuery('#editMultipleAccounts').modal('toggle');jQuery('.disable-btn').removeAttr("disabled");jQuery('#delete-listings').val('')}else{var error_html='<ul>';for(i=0;i<response_data.length;i++){error_html+='<li>'+response_data[i]+'</li>'}
error_html+='</ul>';jQuery('.editaccounts-error-mesg').html('<div class="alert alert-danger" role="alert">'+error_html+'</div>');jQuery('.disable-btn').removeAttr("disabled")}},error:function(){console.log("An error occur durring request")}})});jQuery('#editMultipleAccounts').on('hidden.bs.modal',function(){jQuery('.editaccounts-error-mesg').html('').hide();jQuery('.account_detail_div').html('');jQuery('#delete-listings').val('')})}
if(jQuery('table.grant_accounts_tbl').length){jQuery('table.grant_accounts_tbl').DataTable({"scrollY":"1000px","scrollCollapse":!0,"paging":!1,"info":!1,"bFilter":!1,"bInfo":!1,"order":[]})}
if(jQuery('#compRssForm').length){jQuery(document).on('click','a#compRssModal',function(e){var listing_id=jQuery(this).data('listing_id');var rss_type=jQuery(this).data('rss_type');console.log(listing_id);console.log(rss_type);jQuery('#compRssForm input[name="listing_id"]').val(listing_id);jQuery('#compRssForm input[name="rss_type"]').val(rss_type)});jQuery('#compRssForm').bootstrapValidator({live:'enabled',excluded:[':disabled'],message:'This value is not valid',submitButton:'$compRssForm button[type="submit"]',submitHandler:function(validator,form,submitButton){var $form=jQuery(form),formData=new FormData(),params=$form.serializeArray();jQuery.each(params,function(i,val){formData.append(val.name,val.value)});jQuery('#compRssForm button[type="submit"]').prop('disabled',!0).css('opacity','0.5').html('Submitting...');jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=submit_compRssForm",type:'POST',data:formData,processData:!1,contentType:!1,success:function(data){jQuery('form#compRssForm button[type="submit"]').prop('disabled',!1).css('opacity','1').html('Submit');jQuery('form#compRssForm input[type="text"]').val('');jQuery('#compRssModal .compRssModal-success-mesg').show();setTimeout(function(){location.reload()},2000)},error:function(xhr,ajaxOptions,thrownError){console.log(xhr.status);console.log(xhr.responseText);console.log(thrownError)}});return!1},feedbackIcons:{valid:'glyphicon glyphicon-ok',invalid:'glyphicon glyphicon-remove',validating:'glyphicon glyphicon-refresh'},fields:{rss_url:{validators:{notEmpty:{message:'Enter URL'},uri:{message:'Enter a valid URL'}}}}});jQuery(document).on('click','a#deleteRssConfirm',function(e){var listing_id=jQuery(this).data('listing_id');var rss_type=jQuery(this).data('rss_type');console.log(listing_id);console.log(rss_type);jQuery("button.confirmDel").click(function(){var user_id=jQuery('div#deleteRssConfirm input[name="user_id"]').val();jQuery('div#deleteRssConfirm button.confirmDel').prop('disabled',!0).css('opacity','0.5').html('Deleting...');jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=submit_compRssForm",type:'POST',data:'action=delete&user_id='+user_id+'&listing_id='+listing_id+'&rss_type='+rss_type,success:function(data){jQuery('div#deleteRssConfirm button.confirmDel').css('opacity','1').html('Yes');jQuery('div#deleteRssConfirm .Rssdeletion-success-mesg').show();setTimeout(function(){location.reload()},2000)},error:function(xhr,ajaxOptions,thrownError){console.log(xhr.status);console.log(xhr.responseText);console.log(thrownError)}})})})}
if(jQuery('#venue').length){jQuery('#venue').on('change',function(){form_id=jQuery(this).closest('form').attr('id');if(jQuery(this).val()!=''){jQuery('.wrt-venue').hide()}else{jQuery('.wrt-venue').show()}});var options={map:".map_canvas",details:".wrt-venue",detailsAttribute:"data-geo"};jQuery("#geocomplete").geocomplete(options).bind("geocode:result",function(event,result){jQuery("#geocomplete").closest('form').bootstrapValidator('updateStatus','address','VALIDATED').bootstrapValidator('validateField','address')})}
if(jQuery("select[name='InsCountry']").length){jQuery("select[name='InsCountry']").on("change",function(){var countryVal=jQuery(this).val();var selected_city=jQuery(this).attr('data-selected-city');if(jQuery("#InsCategoryEdit").length){var InsCategory=jQuery("#InsCategoryEdit").val()}else{var InsCategory=jQuery("#InsCategory").val()}
jQuery(".selectpicker2").attr("disabled","disabled");jQuery(".cities-loader").show();jQuery.ajax({url:templateUrl+"/contents/ajax-functions.php?fun=get_cities_by_country",type:'POST',data:'InsCategory='+InsCategory+'&country_term='+countryVal+'&selected_city='+selected_city,success:function(results){jQuery(".cities-loader").hide();jQuery(".selectpicker2").removeAttr("disabled");jQuery(".selectpicker2").html(results).selectpicker('refresh')}})})}
if(jQuery("select.users_parent_categories").length){jQuery("select.users_parent_categories").on("change",function(){var parent_event_val=jQuery(this).val();var selected_child=jQuery(this).attr('data-selected-child');var category_type=jQuery(this).attr('data-category-type');jQuery(".selectpicker22").attr("disabled","disabled");jQuery(".events-loader").show();jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=get_event_sub_categories",type:'POST',data:'category_type='+category_type+'&parent_event_val='+parent_event_val+'&selected_child='+selected_child,success:function(results){jQuery(".events-loader").hide();jQuery(".selectpicker22").removeAttr("disabled");jQuery(".selectpicker22").html(results).selectpicker('refresh')}})})}
jQuery('.imgz-upload-cross-icon').click(function(){jQuery('.imgz-upload-warning-mesg').hide()});jQuery('.add_image .add').click(function(e){my_galler_parent=jQuery(this).parents(".galleryBox");e.preventDefault();btn_prop='';if(jQuery('.block:first').find('input.image-upload').is(':disabled')===!0)
btn_prop='disabled="disabled"';var placeImg='https://www.edarabia.com/wp-content/themes/newed/admin/assets/img/gallery-place.jpg';var loaderImg='<div class="ajax-loader"><img width="100" src="'+templateUrl+'/assets/images/ajax-loader.gif" alt="Edarabia"></div>';var embedDiv='<div class="block"><div class="image-data"><input type="hidden" name="rename_files[]" class="rename_files" /><span class="text">Browse</span><input type="file" class="button image-upload" '+btn_prop+'><button class="remove" '+btn_prop+'>-</button></div><div class="image-preview">'+loaderImg+'<img src="'+placeImg+'" ></div></div>';my_galler_parent.find('.sortBox').append(embedDiv)});jQuery('.galleryBox').on('click','.remove',function(){jQuery(this).parent().parent().remove()});if(jQuery('#regEditListing').length){jQuery("#InsCategory").change(function(){var cat=jQuery(this).val();if(cat=='online-universities'){jQuery("select[name='InsCountry']").parent().parent().parent().hide();jQuery("select[name='InsCity']").parent().parent().parent().hide()}else{jQuery("select[name='InsCountry']").parent().parent().parent().show();jQuery("select[name='InsCity']").parent().parent().parent().show()}
if(cat=='school'){jQuery(".sch-curr").show();jQuery(".nur-curr").hide();jQuery(".sch-curr.nur-curr").show()}else if(cat=='nursery'){jQuery(".sch-curr").hide();jQuery(".nur-curr").show();jQuery(".sch-curr.nur-curr").show()}else{jQuery(".sch-curr").hide();jQuery(".nur-curr").hide()}
if(cat=='nursery'||cat=='school'){jQuery('.grades_or_year_groups_container').removeClass('hide')}else{jQuery('.grades_or_year_groups_container').addClass('hide')}});jQuery("#regEditListing").submit(function(e){e.preventDefault();if(jQuery(".tinyMCE").length&&!checkIE()){var data=CKEDITOR.instances.content.getData();var text=jQuery(data).text()}else{var text=jQuery("textarea#content").val()}
var text_length=text.length;customValidateTinyMCE('tinyMCE-div',text_length);validateYoutubeVideoURLs();var selected_category=jQuery("#InsCategory option:selected").val();if(selected_category=='school'){dynemicMultiSelectCustomValidationLoop(!1,'#sch-curr-container')}else if(selected_category=='nursery'){dynemicMultiSelectCustomValidationLoop(!1,'#nur-curr-container')}});jQuery("form#regEditListing .red-button").hide();jQuery('#regEditListing').bootstrapValidator({live:'enabled',excluded:[':disabled'],message:'This value is not valid',submitButton:'$regEditListing button[type="submit"]',submitHandler:function(validator,form,submitButton){var selected_category=jQuery("#InsCategory option:selected").val();if(jQuery(".tinyMCE").length&&!checkIE()){var data=CKEDITOR.instances.content.getData();var text=jQuery(data).text()}else{var text=jQuery("textarea#content").val()}
var text_length=text.length;if(selected_category=='school'&&(dynemicMultiSelectCustomValidationLoop(!0,'#sch-curr-container')===!1||customValidateTinyMCE('tinyMCE-div',text_length)===!1||validateYoutubeVideoURLs()===!1)){jQuery('html, body').animate({scrollTop:jQuery("#tinyMCE-div").offset().top},500);jQuery('form#regEditListing button[type="submit"]').prop('disabled',!1).css('opacity','1').html('Submit');return!1}else if(selected_category=='nursery'&&(dynemicMultiSelectCustomValidationLoop(!0,'#nur-curr-container')===!1||customValidateTinyMCE('tinyMCE-div',text_length)===!1||validateYoutubeVideoURLs()===!1)){jQuery('html, body').animate({scrollTop:jQuery("#tinyMCE-div").offset().top},500);jQuery('form#regEditListing button[type="submit"]').prop('disabled',!1).css('opacity','1').html('Submit');return!1}else if(customValidateTinyMCE('tinyMCE-div',text_length)===!1||validateYoutubeVideoURLs()===!1){jQuery('html, body').animate({scrollTop:jQuery("#tinyMCE-div").offset().top},500);jQuery('form#regEditListing button[type="submit"]').prop('disabled',!1).css('opacity','1').html('Submit');return!1}
var $form=jQuery(form),formData=new FormData(),params=$form.serializeArray(),cats=[];jQuery.each(params,function(i,val){if(val.name!="content"&&val.name!="admission_content"&&val.name!="fees_content"&&val.value!=''){if(val.name=='providerCategories'||val.name=='schCurr'||val.name=='nurCurr'){cats.push(val.value);formData.append(val.name,cats)}else{formData.append(val.name,val.value)}}});if(jQuery(".tinyMCE").length&&!checkIE()){var cont=CKEDITOR.instances.content.getData();if(jQuery('#admission_content').length){var admission_content=CKEDITOR.instances.admission_content.getData();var fees_content=CKEDITOR.instances.fees_content.getData()}}else{var cont=jQuery("textarea#pcontent").val()}
formData.append('content',cont);if(jQuery('#admission_content').length){formData.append('admission_content',admission_content);formData.append('fees_content',fees_content)}
jQuery('form#regEditListing button[type="submit"]').prop('disabled',!0).css('opacity','0.5').html('Submitting...');refreshURL=wpUrl+'/company-manage-listings/?p=listing';jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=submit_regEditListing",type:'POST',data:formData,processData:!1,contentType:!1,success:function(data){var obj=JSON.parse(data);if(obj.status=='false'){if(obj.message&&obj.message!=''){jQuery('form#regEditListing button[type="submit"]').prop('disabled',!1).css('opacity','1').html('Submit');jQuery(".top-information").before('<div class="alert alert-danger alert-dismissible"><a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>'+obj.message+'</div>');jQuery("html, body").stop().animate({scrollTop:0},500,'swing')}else{internalServerErrorMesg('#regEditListing',refreshURL,'alert-info')}}else{window.location=obj.rd_url}},error:function(xhr,ajaxOptions,thrownError){internalServerErrorMesg('#regEditListing',refreshURL,'alert-info');console.log(xhr.status);console.log(xhr.responseText);console.log(thrownError)}});return!1},feedbackIcons:{valid:'glyphicon glyphicon-ok',invalid:'glyphicon glyphicon-remove',validating:'glyphicon glyphicon-refresh'},fields:{featured_image:{validators:{file:{extension:'jpeg,jpg,png',type:'image/jpeg,image/png',maxSize:1048576,message:'The selected picture is not valid, it should be .jpg/.png and 1 MB at maximum.'},callback:{message:'Please select an image',callback:function(value,validator){if(jQuery(".ftd_img_preview .img-thumbnail").length){return!0}else{if(jQuery(".ftd_img_upload").val()){return!0}else{return!1}}}}}},foundation_year:{message:'The Foundation year is not valid',validators:{stringLength:{min:4,max:4,message:'The Foundation year length must be 4 digits'}}},ListingTitle:{validators:{notEmpty:{message:'The listing title is required and cannot be empty'}}},InsCategory:{validators:{notEmpty:{message:'The institute category is required and cannot be empty'},callback:{message:"The institute category is required and cannot be empty",callback:function(value,validator){var gender=jQuery("select[name='gender'] option:selected").val();var gender_has_message=!1;if(jQuery("#gender-field").hasClass("has-success")===!0||jQuery("#gender-field").hasClass("has-error")===!0){gender_has_message=!0}
if(value!='recruite-agency'){if(gender==''&&gender_has_message===!0){jQuery('form#regEditListing').bootstrapValidator('updateStatus','gender','INVALID').bootstrapValidator('validateField','gender')}else if(gender_has_message===!0){jQuery('form#regEditListing').bootstrapValidator('updateStatus','gender','VALID').bootstrapValidator('validateField','gender')}}else if(gender_has_message===!0){jQuery('form#regEditListing').bootstrapValidator('updateStatus','gender','VALID').bootstrapValidator('validateField','gender')}
var minimum_fees=jQuery("input[name='minimum_fees']").val();var maximum_fees=jQuery("input[name='maximum_fees']").val();var fees_currency=jQuery("select[name='fees_currency'] option:selected").val();var minimum_fees_has_message=!1;if(jQuery("#minimum_fees_container").hasClass("has-success")===!0||jQuery("#minimum_fees_container").hasClass("has-error")===!0){minimum_fees_has_message=!0}
var maximum_fees_has_message=!1;if(jQuery("#maximum_fees_container").hasClass("has-success")===!0||jQuery("#maximum_fees_container").hasClass("has-error")===!0){maximum_fees_has_message=!0}
var fees_currency_has_message=!1;if(jQuery("#fees_currency_containe").hasClass("has-success")===!0||jQuery("#fees_currency_containe").hasClass("has-error")===!0){fees_currency_has_message=!0}
if(value!='employer'){if(minimum_fees==''&&minimum_fees_has_message===!0){jQuery('form#regEditListing').bootstrapValidator('updateStatus','minimum_fees','INVALID').bootstrapValidator('validateField','minimum_fees')}else if(minimum_fees_has_message===!0){jQuery('form#regEditListing').bootstrapValidator('updateStatus','minimum_fees','VALID').bootstrapValidator('validateField','minimum_fees')}
if(maximum_fees==''&&maximum_fees_has_message===!0){jQuery('form#regEditListing').bootstrapValidator('updateStatus','maximum_fees','INVALID').bootstrapValidator('validateField','maximum_fees')}else if(maximum_fees_has_message===!0){jQuery('form#regEditListing').bootstrapValidator('updateStatus','maximum_fees','VALID').bootstrapValidator('validateField','maximum_fees')}
if(fees_currency==''&&fees_currency_has_message===!0){jQuery('form#regEditListing').bootstrapValidator('updateStatus','fees_currency','INVALID').bootstrapValidator('validateField','fees_currency')}else if(fees_currency_has_message===!0){jQuery('form#regEditListing').bootstrapValidator('updateStatus','fees_currency','VALID').bootstrapValidator('validateField','fees_currency')}}else{if(minimum_fees_has_message===!0){jQuery('form#regEditListing').bootstrapValidator('updateStatus','minimum_fees','VALID').bootstrapValidator('validateField','minimum_fees')}
if(maximum_fees_has_message===!0){jQuery('form#regEditListing').bootstrapValidator('updateStatus','fees_currency','VALID').bootstrapValidator('validateField','fees_currency')}
if(fees_currency_has_message===!0){jQuery('form#regEditListing').bootstrapValidator('updateStatus','fees_currency','VALID').bootstrapValidator('validateField','fees_currency')}}
if(value=='')
return!1;else return!0}}}},InsCountry:{validators:{callback:{message:'Country is required and cannot be emptyy',callback:function(value,validator){if(jQuery("#InsCategoryEdit").length){var InsCategory=jQuery("#InsCategoryEdit option:selected").val()}else{var InsCategory=jQuery("#InsCategory option:selected").val()}
if(InsCategory!='online-universities'){var InsCountry=jQuery("select[name='InsCountry'] option:selected").val();if(InsCountry!=''){return!0}else{return!1}}else{return!0}}}}},InsCity:{validators:{callback:{message:'City is required and cannot be empty',callback:function(value,validator){if(jQuery("#InsCategoryEdit").length){var InsCategory=jQuery("#InsCategoryEdit option:selected").val()}else{var InsCategory=jQuery("#InsCategory option:selected").val()}
if(InsCategory!='online-universities'){var InsCity=jQuery("select[name='InsCity'] option:selected").val();if(InsCity!=''){return!0}else{return!1}}else{return!0}}}}},address:{validators:{notEmpty:{message:'The address is required and cannot be empty'}}},map_longitude:{validators:{callback:{message:"Please enter an valid latitude.",callback:function(value,validator){var value=jQuery("input[name='map_latitude']").val();if(value!=''){value=isLatitude(value);if(value===!0){return!0}else{return!1}}else{return!0}}}}},map_longitude:{validators:{callback:{message:"Please enter an valid longitude.",callback:function(value,validator){var value=jQuery("input[name='map_longitude']").val();if(value!=''){value=isLongitude(value);if(value===!0){return!0}else{return!1}}else{return!0}}}}},email:{validators:{notEmpty:{message:'The email address is required'},callback:{message:"The input is not a valid email address",callback:function(value,validator){var multi_emails=value;emails=multi_emails.split(',');email_error=!1;var email_extra_commas='';var email_format='';var error_message='';jQuery.each(emails,function(index,email_value){if(jQuery.trim(email_value)==''){email_extra_commas="Please remove extra commas.";email_error=!0}else if(validate_email(jQuery.trim(email_value))===!1){if(emails.length==1)
email_format="Please provide a valid email address.";else email_format="One of your email address is wrong.";email_error=!0}});if(email_error===!0){return!1}else{return!0}}}}},website:{validators:{notEmpty:{message:'The website address is required'},callback:{message:"Please enter a valid URL starting with www.",callback:function(value,validator){var url=jQuery("input[name='website']").val();if(url!=''){website_url=validate_website_url(url);if(website_url===!0){return!0}else{return!1}}else{return!0}}}}},special_offer_detail:{validators:{stringLength:{max:100,message:'Provide less than 100 characters'}}},special_offer_link:{validators:{callback:{message:"Please enter an valid link.",callback:function(value,validator){var url=jQuery("input[name='special_offer_link']").val();if(url!=''){url=validate_website_url(url);if(url===!0){return!0}else{return!1}}else{return!0}}}}},gender:{validators:{callback:{message:"The gender is required and cannot be empty.",callback:function(value,validator){var listing_name=jQuery(".add_edit_listing_name option:selected").val();if(listing_name!='recruite-agency'){if(value=='')
return!1;else return!0}else{return!0}}}}},minimum_fees:{validators:{callback:{message:"The minimum fees is required and cannot be empty",callback:function(value,validator){var listing_name=jQuery(".add_edit_listing_name option:selected").val();if(listing_name!='recruite-agency'&&listing_name!='employer'){if(value=='')
return!1;else return!0}else{return!0}}}}},maximum_fees:{validators:{callback:{message:"The maximum fees is required and cannot be empty",callback:function(value,validator){var listing_name=jQuery(".add_edit_listing_name option:selected").val();if(listing_name!='recruite-agency'&&listing_name!='employer'){if(value=='')
return!1;else return!0}else{return!0}}}}},fees_currency:{validators:{callback:{message:"The fees currency is required and cannot be empty",callback:function(value,validator){var listing_name=jQuery(".add_edit_listing_name option:selected").val();if(listing_name!='recruite-agency'){if(value=='')
return!1;else return!0}else{return!0}}}}},contact_person_name_1:{validators:{notEmpty:{message:'Provide contact person name, It can not be empty'},}},contact_person_position_1:{validators:{notEmpty:{message:'Provide contact person position, It can not be empty'},}},contact_person_email_1:{validators:{notEmpty:{message:'Provide contact person email, It can not be empty'},emailAddress:{message:'The contact person email is not a valid email address'}}},contact_person_email_2:{validators:{emailAddress:{message:'The contact person email is not a valid email address'}}},contact_person_number_1:{validators:{notEmpty:{message:'Provide contact person number, It can not be empty'},}},info_check:{validators:{notEmpty:{message:'Confirm form information'}}}}})}
if(jQuery('#regEditCourse').length){jQuery(".submit-course-btn").click(function(){jQuery("form#regEditCourse").submit()});jQuery("form#regEditCourse .red-button").hide();jQuery('#regEditCourse').bootstrapValidator({live:'enabled',message:'This value is not valid',submitButton:'$regEditCourse button[type="button"]',feedbackIcons:{valid:'glyphicon glyphicon-ok',invalid:'glyphicon glyphicon-remove',validating:'glyphicon glyphicon-refresh'},fields:{company_listing:{validators:{notEmpty:{message:'Institute is required and cannot be empty'}}},courseTitle:{validators:{notEmpty:{message:'The title is required and cannot be empty'},stringLength:{max:100,message:'The title must be less than 100 characters'}}},courseCategories:{validators:{notEmpty:{message:'Category is required and cannot be empty'}}},course_level:{validators:{notEmpty:{message:'The course level is required and cannot be empty'}}},InsCountry:{validators:{notEmpty:{message:'Country is required and cannot be empty'}}},InsCity:{validators:{notEmpty:{message:'City is required and cannot be empty'}}},start_date:{validators:{notEmpty:{message:'Start date is required and cannot be empty'},date:{format:'YYYY-MM-DD',message:'The format is YYYY-MM-DD'}}},end_date:{validators:{notEmpty:{message:'End date is required and cannot be empty'},date:{format:'YYYY-MM-DD',message:'The format is YYYY-MM-DD'}}},offer_at:{validators:{notEmpty:{message:'The course offered at is required and cannot be empty'}}},email:{validators:{emailAddress:{message:'The input is not a valid email address'}}},website:{validators:{callback:{message:"Please enter a valid URL starting with www.",callback:function(value,validator){var url=jQuery("input[name='website']").val();if(url!=''){url=validate_website_url(url);if(url===!0){return!0}else{return!1}}else{return!0}}}}},special_offer_detail:{validators:{stringLength:{max:100,message:'Provide less than 100 characters'}}},special_offer_link:{validators:{callback:{message:"Please enter an valid link.",callback:function(value,validator){var url=jQuery("input[name='special_offer_link']").val();if(url!=''){url=validate_website_url(url);if(url===!0){return!0}else{return!1}}else{return!0}}}}},start_day:{validators:{notEmpty:{message:'The start day is required'}}},end_day:{validators:{notEmpty:{message:'The end day is required e.g; 12:00 AM'}}},start_time:{validators:{callback:{message:"Please enter a valid time format e.g; 12:00 AM",callback:function(value,validator){var validTime=value.match(/^(0?[1-9]|1[012])(:[0-5]\d) [APap][mM]$/);if(!validTime){return!1}else{return!0}}}}},end_time:{validators:{callback:{message:"Please enter a valid time format e.g; 12:00 AM",callback:function(value,validator){var validTime=value.match(/^(0?[1-9]|1[012])(:[0-5]\d) [APap][mM]$/);if(!validTime){return!1}else{return!0}}}}},minimum_fees:{validators:{notEmpty:{message:'The minimum fees is required and cannot be empty'}}},maximum_fees:{validators:{notEmpty:{message:'The maximum fees is required and cannot be empty'}}},fees_currency:{validators:{notEmpty:{message:'The fees currency is required and cannot be empty'}}},info_check:{validators:{notEmpty:{message:'Confirm form information'}}}}}).on('success.form.bv',function(e){e.preventDefault();jQuery('#regEditCourse button[type="button"]').prop('disabled',!0);jQuery('#regEditCourse button[type="button"]').attr("disabled","disabled");jQuery('#regEditCourse button[type="button"]').css('opacity','0.5').html('Submitting...');var $form=jQuery(e.target),formData=new FormData(),params=$form.serializeArray();var cats=[];jQuery.each(params,function(i,val){if(val.name!="content"&&val.value!=''){if(val.name=='courseCategories'){cats.push(val.value);formData.append(val.name,cats)}else{formData.append(val.name,val.value)}}});if(jQuery(".tinyMCE").length&&!checkIE()){var cont=CKEDITOR.instances.content.getData();var cont2=CKEDITOR.instances.about_instructor.getData()}else{var cont=jQuery("textarea#content").val();var cont2=jQuery("textarea#about_instructor").val()}
var text_length=cont.length;if(customValidateTinyMCE('tinyMCE-div',text_length)===!1){jQuery('html, body').animate({scrollTop:jQuery("#tinyMCE-div").offset().top},500);return!1}else{formData.append('theContent',cont);formData.append('about_instructor',cont2)}
refreshURL=wpUrl+'/company-manage-listings/?p=course';jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=submit_compCourseForm",type:'POST',data:formData,processData:!1,contentType:!1,success:function(data){var obj=JSON.parse(data);if(obj.status=='false'){internalServerErrorMesg('#regEditCourse',refreshURL,'alert-info')}else{jQuery("#regEditCourse").data('bootstrapValidator').resetForm();window.location=obj.rd_url}
return!1},error:function(xhr,ajaxOptions,thrownError){internalServerErrorMesg('#regEditCourse',refreshURL,'alert-info');console.log(xhr.status);console.log(xhr.responseText);console.log(thrownError)}})})}
if(jQuery('#CompJobForm').length){jQuery("form#CompJobForm .red-button").hide();jQuery("#CompJobForm").submit(function(e){e.preventDefault();if(jQuery(".tinyMCE").length&&!checkIE()){var data=CKEDITOR.instances.post_content.getData();var text=jQuery(data).text()}else{var text=jQuery("textarea#post_content").val()}
var text_length=text.length;customValidateTinyMCE('tinyMCE-div',text_length)});jQuery('#CompJobForm').bootstrapValidator({live:'enabled',excluded:[':disabled'],message:'This value is not valid',submitButton:'$CompJobForm button[type="submit"]',submitHandler:function(validator,form,submitButton){if(jQuery(".tinyMCE").length&&!checkIE()){var data=CKEDITOR.instances.post_content.getData();var text=jQuery(data).text()}else{var text=jQuery("textarea#post_content").val()}
var text_length=text.length;if(customValidateTinyMCE('tinyMCE-div',text_length)===!1){jQuery('html, body').animate({scrollTop:jQuery("#tinyMCE-div").offset().top},500);return!1}
var $form=jQuery(form),formData=new FormData(),params=$form.serializeArray();var cats=[];jQuery.each(params,function(i,val){if(val.name=='jobCats'){cats.push(val.value);formData.append(val.name,cats)}else if(val.value!=''&&val.name!="post_content"){formData.append(val.name,val.value)}});if(jQuery(".tinyMCE").length&&!checkIE()){var cont=CKEDITOR.instances.post_content.getData()}else{var cont=jQuery("textarea#post_content").val()}
formData.append('post_content',cont);jQuery('form#CompJobForm button[type="submit"]').prop('disabled',!0).css('opacity','0.5').html('Submitting...');refreshURL=wpUrl+'/company-manage-listings/?p=job';jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=submit_compJobForm",type:'POST',data:formData,processData:!1,contentType:!1,success:function(data){var obj=JSON.parse(data);if(obj.status=='false'){internalServerErrorMesg('#CompJobForm',refreshURL,'alert-info')}else{window.location=obj.rd_url}},error:function(xhr,ajaxOptions,thrownError){internalServerErrorMesg('#CompJobForm',refreshURL,'alert-info');console.log(xhr.status);console.log(xhr.responseText);console.log(thrownError)}});return!1},feedbackIcons:{valid:'glyphicon glyphicon-ok',invalid:'glyphicon glyphicon-remove',validating:'glyphicon glyphicon-refresh'},fields:{company_listing:{validators:{notEmpty:{message:'Institute is required and cannot be empty'}}},headline:{validators:{notEmpty:{message:'The title is required and cannot be empty'},stringLength:{max:85,message:'The title must be less than 85 characters'}}},InsCountry:{validators:{notEmpty:{message:'Country is required and cannot be empty'}}},InsCity:{validators:{notEmpty:{message:'City is required and cannot be empty'}}},jobCats:{validators:{notEmpty:{message:'Category is required and cannot be empty'}}},degree_level:{validators:{notEmpty:{message:'Education Level is required and cannot be empty'}}},experience:{validators:{notEmpty:{message:'Experience is required and cannot be empty'}}},employment_type:{validators:{notEmpty:{message:'Employment Type is required and cannot be empty'}}},gender:{validators:{notEmpty:{message:'Gender is required and cannot be empty'}}},salary:{validators:{notEmpty:{message:'Salary range is required and cannot be empty'}}},fees_currency:{validators:{notEmpty:{message:'The currency is required and cannot be empty'}}},validity_date:{validators:{notEmpty:{message:'Validity date is required and cannot be empty'},date:{format:'YY-MM-DD',message:'The format is YY-MM-DD'}}},info_check:{validators:{notEmpty:{message:'Confirm form information'}}}}})}
if(jQuery('#CompanyNewsForm').length){jQuery("form#CompanyNewsForm .red-button").hide();jQuery("#CompanyNewsForm").submit(function(e){e.preventDefault();if(jQuery(".tinyMCE").length&&!checkIE()){var data=CKEDITOR.instances.post_content.getData();var text=jQuery(data).text()}else{var text=jQuery("textarea#post_content").val()}
var text_length=text.length;customValidateTinyMCE('tinyMCE-div',text_length)});jQuery('#CompanyNewsForm').bootstrapValidator({live:'enabled',excluded:[':disabled'],message:'This value is not valid',submitButton:'$CompanyNewsForm button[type="submit"]',submitHandler:function(validator,form,submitButton){if(jQuery(".tinyMCE").length&&!checkIE()){var data=CKEDITOR.instances.post_content.getData();var text=jQuery(data).text()}else{var text=jQuery("textarea#post_content").val()}
var text_length=text.length;if(customValidateTinyMCE('tinyMCE-div',text_length)===!1){jQuery('html, body').animate({scrollTop:jQuery("#tinyMCE-div").offset().top},500);return!1}
var $form=jQuery(form),formData=new FormData(),params=$form.serializeArray();jQuery.each(params,function(i,val){if(val.value!=''&&val.name!="post_content"){formData.append(val.name,val.value)}});if(jQuery(".tinyMCE").length&&!checkIE()){var cont=CKEDITOR.instances.post_content.getData()}else{var cont=jQuery("textarea#post_content").val()}
formData.append('post_content',cont);jQuery('form#CompanyNewsForm button[type="submit"]').prop('disabled',!0).css('opacity','0.5').html('Submitting...');refreshURL=wpUrl+'/company-manage-listings/?p=news-posts';jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=submit_compNewsForm",type:'POST',data:formData,processData:!1,contentType:!1,success:function(data){var obj=JSON.parse(data);if(obj.status=='false'){internalServerErrorMesg('#CompanyNewsForm',refreshURL,'alert-info')}else{window.location=obj.rd_url}},error:function(xhr,ajaxOptions,thrownError){internalServerErrorMesg('#CompanyNewsForm',refreshURL,'alert-info');console.log(xhr.status);console.log(xhr.responseText);console.log(thrownError)}});return!1},feedbackIcons:{valid:'glyphicon glyphicon-ok',invalid:'glyphicon glyphicon-remove',validating:'glyphicon glyphicon-refresh'},fields:{company_listing:{validators:{notEmpty:{message:'Institute is required and cannot be empty'}}},headline:{validators:{notEmpty:{message:'The title is required and cannot be empty'},stringLength:{max:85,message:'The title must be less than 85 characters'}}},featured_image:{validators:{file:{extension:'jpeg,jpg,png',type:'image/jpeg,image/png',maxSize:1048576,message:'The selected picture is not valid, it should be .jpg/.png and 1 MB at maximum.'},callback:{message:'Please select an image',callback:function(value,validator){if(jQuery(".ftd_img_preview .img-thumbnail").length){return!0}else{if(jQuery(".ftd_img_upload").val()){return!0}else{return!1}}}}}},info_check:{validators:{notEmpty:{message:'Confirm form information'}}}}})}
jQuery("#providerCategories").on("changed.bs.select",function(e,clickedIndex,newValue,oldValue){var _this=jQuery(this);var selected_value=_this.find('option').eq(clickedIndex).val();var selected_text=_this.find('option').eq(clickedIndex).text();var div_id=_this.closest('.multi_custom_validation').attr('id');multiSelectCustomValidation(div_id,!0);addRemoveSubjectsPriceDetailRows(newValue,selected_value,selected_text)});jQuery("#preferred_days").on("changed.bs.select",function(e,clickedIndex,newValue,oldValue){var _this=jQuery(this);var selected_value=_this.find('option').eq(clickedIndex).val();var selected_text=_this.find('option').eq(clickedIndex).text();var div_id=_this.closest('.multi_custom_validation').attr('id');multiSelectCustomValidation(div_id,!0)});jQuery("#preferred_timings").on("changed.bs.select",function(e,clickedIndex,newValue,oldValue){var _this=jQuery(this);var selected_value=_this.find('option').eq(clickedIndex).val();var selected_text=_this.find('option').eq(clickedIndex).text();var div_id=_this.closest('.multi_custom_validation').attr('id');multiSelectCustomValidation(div_id,!0)});jQuery("#sch-curr-container").on("changed.bs.select",function(e,clickedIndex,newValue,oldValue){var _this=jQuery(this);var selected_value=_this.find('option').eq(clickedIndex).val();var selected_text=_this.find('option').eq(clickedIndex).text();var div_id=_this.closest('.sch-curr-validation').attr('id');multiSelectCustomValidation(div_id,!0)});jQuery("#nur-curr-container").on("changed.bs.select",function(e,clickedIndex,newValue,oldValue){var _this=jQuery(this);var selected_value=_this.find('option').eq(clickedIndex).val();var selected_text=_this.find('option').eq(clickedIndex).text();var div_id=_this.closest('.nur-curr-validation').attr('id');multiSelectCustomValidation(div_id,!0)});if(jQuery('#holdTicketsForm').length){jQuery('#holdTicketsForm').bootstrapValidator({live:'enabled',message:'This value is not valid',submitButton:'$holdTicketsForm .checkout-btn',submitHandler:function(validator,form,submitButton){var $form=jQuery(form),formData=new FormData(),params=$form.serializeArray();jQuery.each(params,function(i,val){formData.append(val.name,val.value)});var btn_text=jQuery('form#holdTicketsForm button').html();refreshURL=window.location.href;jQuery('form#holdTicketsForm .checkout-btn').prop('disabled',!0).css('opacity','0.5').html('Submitting...');if(jQuery('.tickets-total .float-right div').text()>0){function_name='holdTickets'}else{function_name='buyFreeTickets'}
jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun="+function_name,type:'POST',dataType:"json",data:formData,processData:!1,contentType:!1,success:function(data){console.log('returned data');console.log(data);if(data.status=='success'){if(data.ticket_type=='free'){window.location.href=siteUrl+'/thank-you-event/?orderconfirmation='+data.orderconfirmation}else{var payment_form_id='#frm_payfort_payment_merchant_page2';var holding_form_id='#holdTicketsForm';jQuery(payment_form_id+' .first-name').html(data.user_firstname);if(data.user_lastname!='')
jQuery(payment_form_id+' .last-name').html(data.user_lastname);else jQuery(payment_form_id+' .last-name-container').hide();jQuery(payment_form_id+' .user-email').html(data.user_email);var user_id=data.user_id;var event_id=jQuery('input[name="event_id"]').val();var amount=jQuery(holding_form_id+' .tickets-total .float-right div').text();var summary_detail=jQuery(holding_form_id+' .left-summary-detail').html();jQuery(payment_form_id+' .left-summary-detail').html(summary_detail);jQuery(payment_form_id+' input[name="amount"]').val(amount);var custom=user_id+'|^***^|'+event_id+'|^***^|'+amount;jQuery('input[name="custom"]').val(custom);jQuery(holding_form_id).hide();jQuery(payment_form_id).show();jQuery('[data-toggle="fees-tooltip"]').tooltip();calculateTime()}}},error:function(xhr,ajaxOptions,thrownError){internalServerErrorMesg('#holdTicketsForm',refreshURL,'alert-warning',!0,btn_text);console.log(xhr.status);console.log(xhr.responseText);console.log(thrownError)}});return!1},feedbackIcons:{valid:'glyphicon glyphicon-ok',invalid:'glyphicon glyphicon-remove',validating:'glyphicon glyphicon-refresh'},fields:{user_firstname:{validators:{notEmpty:{message:'The First name is required and cannot be empty'}}},user_lastname:{validators:{notEmpty:{message:'The Last name is required and cannot be empty'}}},user_email:{validators:{notEmpty:{message:'The email address is required'},emailAddress:{message:'The input is not a valid email address'},callback:{message:'Please type another email address!',callback:function(value,validator){var match_with='';if(value.indexOf('@edarabia.com')==-1){match_with=value}
return value==match_with}}}},user_pass:{validators:{notEmpty:{message:'The password is required and cannot be empty'}}},user_nationalities:{validators:{notEmpty:{message:'The Nationality is required and cannot be empty'}}},user_gender:{validators:{notEmpty:{message:'The Gender is required and cannot be empty'}}}}})}
jQuery(document).on("submit",'#eventPaymentForm',function(e){jQuery('#eventPaymentForm').submit()});jQuery('.get-event-booking-detail').on('click',function(e){var event_id=jQuery(this).attr('data-event-id');jQuery('.booking_detail_div').hide();jQuery('.booking_detail_loader').show();jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=getEventBookingDetail",type:'POST',data:'&event_id='+event_id,success:function(data){jQuery('.booking_detail_loader').hide();jQuery('.booking_detail_body').html(data);jQuery('.booking_detail_div').show()},error:function(xhr,ajaxOptions,thrownError){console.log(xhr.status);console.log(xhr.responseText);console.log(thrownError)}})});jQuery(".pay_via_paypal").on('click',function(){jQuery("#submit_btn").click()});if(jQuery('select[name="number_of_tickets"]').length>0||jQuery('input[name="donation_amount"]').length>0){jQuery('.booking-datepicker').bind('keyup change',function(){var booking_date=jQuery(this).val();var ticket_id=jQuery(this).attr('data-ticket-id');if(booking_date==''){internalServerErrorMesg('#holdTicketsForm','','alert-danger',!0,'',0,'Please make sure you have selected Booking date.');jQuery('.tickets-parent-row-'+ticket_id+' .tickets-calculations').val('0').trigger('change')}else{if(jQuery('#cal_booking_date_'+ticket_id).length){jQuery('#cal_booking_date_'+ticket_id).val(booking_date)}}});jQuery('.tickets-calculations').bind('keyup change',function(){var _this=jQuery(this);var absorb_fees=_this.attr('data-absorb-fees');var tickets_row=_this.attr('data-tickets-row');var ticket_id=_this.attr('data-ticket-id');var ticket_name=jQuery('.parent-'+tickets_row).text();var booking_date=jQuery('#booking_date_'+ticket_id).val();var main_div='#holdTicketsForm .tickets-summary-container .tickets-summary';var mk_html='';var cal_fee_absorb=0;var amount=0.00;var number_of_tickets=0;var is_donation=!1;var service_fees=jQuery('input[name="service_fees"]').val();var processing_fees=jQuery('input[name="processing_fees"]').val();if(_this.attr('name')=='number_of_tickets'){var number_of_tickets=_this.find("option:selected").val();var ticket_price=_this.attr('data-ticket-price');var ticket_type=_this.attr('data-ticket-type');if(number_of_tickets>0){if(ticket_type=='Paid'){amount=number_of_tickets*ticket_price;if(absorb_fees==0){var final_service_fees=(service_fees/100)*amount;final_service_fees=final_service_fees.toFixed(2);cal_fee_absorb=+final_service_fees+ +processing_fees;cal_fee_absorb=cal_fee_absorb.toFixed(2)}}else{amount=0.00}}}else{amount=_this.val();is_donation=!0}
if(amount>0||number_of_tickets>0){if(jQuery(main_div+" ."+tickets_row).length==0){mk_html+='<div class="cal-result-rows clearfix '+tickets_row+'">';if(is_donation)
mk_html+='<div class="float-left">'+ticket_name+'</div>';else mk_html+='<div class="float-left">'+number_of_tickets+' x '+ticket_name+'</div>';mk_html+='<div class="float-right">$'+amount+'</div>';mk_html+='<input type="hidden" name="booking_summary[ticket_quantity][]" class="num_of_tickets" value="'+number_of_tickets+'">';mk_html+='<input type="hidden" name="booking_summary[ticket_name][]" value="'+ticket_name+'">';mk_html+='<input type="hidden" name="booking_summary[amount][]" class="ticket_amount" value="'+amount+'">';mk_html+='<input type="hidden" name="fee_absorb" class="ticket_fee_absorb" value="'+cal_fee_absorb+'">';mk_html+='<input type="hidden" name="booking_summary[ticket_id][]" class="ticket_id" value="'+ticket_id+'">';mk_html+='<input type="hidden" name="booking_summary[booking_date][]" class="booking_date" id="cal_booking_date_'+ticket_id+'" value="'+booking_date+'">';mk_html+='</div>';jQuery(".tickets-summary-container .tickets-summary").append(mk_html)}else{if(is_donation)
jQuery('.'+tickets_row+' .float-left').text(ticket_name);else jQuery('.'+tickets_row+' .float-left').text(number_of_tickets+' x '+ticket_name);jQuery('.'+tickets_row+' .float-right').text('$'+amount);jQuery('.'+tickets_row+' .ticket_amount').val(amount);jQuery('.'+tickets_row+' .ticket_fee_absorb').val(cal_fee_absorb);jQuery('.'+tickets_row+' .num_of_tickets').val(number_of_tickets);jQuery('.'+tickets_row+' .booking_date').val(booking_date)}}else{jQuery('.tickets-summary .'+tickets_row).remove()}
var subtotal=0;var fees_amount=0;var amount=0;var total_amount=0;if(jQuery('.tickets-summary .cal-result-rows').length){jQuery('.tickets-summary-container').show();jQuery('.cal-result-rows').each(function(){var amount=jQuery(this).find('.ticket_amount').val();var fee_absorb=jQuery(this).find('.ticket_fee_absorb').val();subtotal=+subtotal+ +amount;fees_amount=+fees_amount+ +fee_absorb});jQuery('.tickets-fees').hide();jQuery('.tickets-sub-total').hide();if(fees_amount>0){jQuery('.tickets-fees .float-right').text('$'+fees_amount.toFixed(2));jQuery('.tickets-fees').show();if(subtotal>0){jQuery('.tickets-sub-total .float-right').text('$'+subtotal.toFixed(2));jQuery('.tickets-sub-total').show()}else{jQuery('.tickets-sub-total').hide();jQuery('.tickets-sub-total .float-right').text('')}}
total_amount=+subtotal+ +fees_amount;jQuery('.tickets-total .float-right').html('$<div style="display:inline-block;">'+total_amount.toFixed(2)+'</div>');jQuery('.tickets-total').show();jQuery('#total-amount').val(total_amount.toFixed(2));jQuery('.checkout-btn').show()}else{jQuery('.checkout-btn').hide();jQuery('.tickets-summary-container').hide();jQuery('.tickets-sub-total .float-right, .tickets-fees .float-right, .tickets-total .float-right').text('');jQuery('.tickets-sub-total, .tickets-fees, .tickets-total').hide()}
if(_this.attr('name')=='number_of_tickets'&&booking_date==''&&_this.val()>0){internalServerErrorMesg('#holdTicketsForm','','alert-danger',!0,'',0,'Please make sure you have selected Booking date.');jQuery(_this).val('0').trigger('change');return!1}})}
if(jQuery("select[name='courseCategories']").length){var allowImgs=['19923','26943','19896','19705'];jQuery("select[name='courseCategories'], select[name='courseSubCategories']").on("change",function(){if(allowImgs.indexOf(jQuery(this).val())>=0){jQuery(".galleryBoxToggle").show()}else{jQuery(".galleryBoxToggle").hide()}});jQuery("select[name='courseCategories']").on("change",function(){var parent_event_val=jQuery(this).val();var selected_child=jQuery(this).attr('data-selected-child');var category_type='type';jQuery(".selectpicker22").attr("disabled","disabled");jQuery(".courses-cat-loader").show();jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=get_event_sub_categories",type:'POST',data:'category_type='+category_type+'&parent_event_val='+parent_event_val+'&selected_child='+selected_child,success:function(results){console.log(results);jQuery(".courses-cat-loader").hide();jQuery(".selectpicker22").removeAttr("disabled");jQuery(".selectpicker22").html(results).selectpicker('refresh')}})})}
jQuery(document).on('keyup','.validate_this_video',function(e){var _this=jQuery(this);validateSingleYoutubeVideoURL(_this)});jQuery(".addMoreYoutubeVideos").click(function(e){var num_of_fields=jQuery(".addMoreYoutubeVideos").attr('data-num-of-fields');if(typeof num_of_fields!==typeof undefined&&num_of_fields!==!1){for(var i=0;i<num_of_fields;i++){var newElement=jQuery('#videosTemplate div.ed-videos-input:first').clone();jQuery('input',newElement).attr("value",'');newElement.find('.has-success').removeClass('has-success');newElement.find('.has-error').removeClass('has-error');newElement.find('.glyphicon-ok, .glyphicon-remove, .help-block').hide();newElement.appendTo(jQuery("#videosTemplate"))}}
e.preventDefault()});if(jQuery(".put_listing_content").length){jQuery(".put_listing_content").on("change",function(){var get_content='';var listing_value=jQuery(this).val();if(listing_value>0){var get_content=jQuery('.first_paragraph_container_'+listing_value).html()}
CKEDITOR.instances.about_instructor.setData(get_content)})}});function tinymce_editor(selector){if(!checkIE()){tinymce.init({selector:'.'+selector,menubar:!1,branding:!1,codesample_dialog_width:600,codesample_dialog_height:425,height:"250",plugins:["lists","paste","image"],toolbar:'formatselect | bold italic | alignleft aligncenter alignright | numlist bullist | image',block_formats:'Paragraph=p; Heading 3=h3; Heading 4=h4; Heading 5=h5; Heading 6=h6; Preformatted=pre',relative_urls:!1,remove_script_host:!0,document_base_url:window.location.origin+"/wp-includes/js/tinymce/",paste_as_text:!0,setup:function(editor){editor.on('keyup',function(e){if(jQuery(".tinyMCE").length&&!checkIE()){var data=CKEDITOR.instances.content.getData();var text=jQuery(data).text()}else{var text=jQuery("textarea#content").val()}
var text_length=text.length;if(text.length>=550){jQuery('.'+selector).closest('form').bootstrapValidator('updateStatus',selector,'VALIDATED').bootstrapValidator('validateField',selector)}else{jQuery('.'+selector).closest('form').bootstrapValidator('updateStatus',selector,'NOT_VALIDATED').bootstrapValidator('validateField',selector)}})}})}}
function replace_br2(html){temp=html.split("<p>");my_string='';jQuery.each(temp,function(index,value){my_html=value;temp2=my_html.split("</p>");temp2[0]=(temp2[0]).split("<br>").join("</p><p>");temp2[0]=(temp2[0]).split("<br />").join("</p><p>");temp2[0]=(temp2[0]).split("<br/>").join("</p><p>");new_html2=temp2.join("</p>");if(my_string==""){my_string=my_string+"<p>"+new_html2}else{my_string=my_string+"<p>"+new_html2}});my_string=my_string.split("<p>&nbsp;</p>").join("");check_double_p=my_string.substring(0,6);if(check_double_p=="<p><p>"){my_string="<p>"+my_string.substring(6,10000000000000)}
my_string=my_string.split("<p>&nbsp;</p>").join("");return my_string}
function clear_empty_p2(html){html=html.split("<p>&nbsp;</p>").join(" ");html=html.split("&nbsp;&nbsp;").join("");html=html.split("&nbsp;").join(" ");return html}
function set_table_class2(html){var dom_nodes=jQuery(jQuery.parseHTML('<div>'+html+'</div>'));dom_nodes.find("table").removeAttr("class");dom_nodes.find("table").addClass("table");dom_nodes.find("table").addClass("table-striped");dom_nodes.find("table").addClass("table-hover");string=dom_nodes.html();return string}
var abc=0;function tinymce_validated(editor_id){console.log('editor start');if(CKEDITOR.env.ie&&CKEDITOR.env.version<9)
CKEDITOR.tools.enableHtml5Elements(document);CKEDITOR.config.height=300;CKEDITOR.config.width='auto';CKEDITOR.config.allowedContent='h3 p ul li ol strong b i align br table thead tbody tfoot tr th td';CKEDITOR.config.disallowedContent='hr';CKEDITOR.config.extraAllowedContent="table(table,table-striped,table-hover); a[href,target](*)";CKEDITOR.on('instanceReady',function(ev){mythis=this;var myVar;var myVar2;var editor=CKEDITOR.instances[editor_id];editor.on('paste',function(evt){var s=editor.getSelection();var selected_ranges=s.getRanges();var bookmarks=s.createBookmarks(!0);clearTimeout(myVar);myVar=setTimeout(function(){abc=abc+1;console.log(abc);var data=evt.editor.getData();data=data.split("<h1>").join("<h3>");data=data.split("</h1>").join("</h3>");data=data.split("<h2>").join("<h3>");data=data.split("</h2>").join("</h3>");data=set_table_class2(data);data=replace_br2(data);evt.editor.setData(data,function(){var range=editor.createRange();range.moveToElementEditEnd(range.root);editor.getSelection().selectRanges([range]);var data=evt.editor.getData();data=clear_empty_p2(data);evt.editor.setData(data,function(){var range=editor.createRange();range.moveToElementEditEnd(range.root);editor.getSelection().selectRanges([range])})})},2000)});editor.on('change',function(evt){console.log("Editor change event fire");var data=editor.getData();var text=jQuery.trim(jQuery(data).text());var text_length=text.length;var form_id=jQuery('#'+editor_id).closest('form').attr('id');var editorParent=jQuery('#'+editor_id).parent();if(text_length<550){editorParent.removeClass('has-success');editorParent.addClass('has-error');editorParent.find('.editor-success').hide();editorParent.find('.editor-error').show();if(editorParent.find('.help-block').is(":hidden")){editorParent.find('.help-block').show()}
jQuery('form#'+form_id+' button[type="submit"]').prop('disabled',!0)}else{editorParent.addClass('has-success');editorParent.removeClass('has-error');editorParent.find('.editor-success').show();editorParent.find('.editor-error').hide();editorParent.find('.help-block').hide();jQuery('form#'+form_id+' button[type="submit"]').prop('disabled',!1)}})});CKEDITOR.config.toolbar=[['Font','FontSize','Bold','Italic','Underline','Strike','-','Blockquote','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock'],['BidiLtr','BidiRtl'],['TextColor','BGColor'],['customimage','customsmiley','Link','Unlink'],['Flash','customfiles','Table','-','Outdent','Indent'],['NumberedList','BulletedList','HorizontalRule'],['Format'],['-'],['Paste','PasteText','PasteFromWord'],['-','Source'],['Maximize']];var initSample=(function(){var wysiwygareaAvailable=isWysiwygareaAvailable(),isBBCodeBuiltIn=!!CKEDITOR.plugins.get('bbcode');return function(){var editorElement=CKEDITOR.document.getById(editor_id);if(wysiwygareaAvailable){CKEDITOR.replace(editor_id)}else{editorElement.replace('contenteditable','true')}};function isWysiwygareaAvailable(){if(CKEDITOR.revision==('%RE'+'V%')){return!0}
return!!CKEDITOR.plugins.get('wysiwygarea')}})();initSample()}
function customValidateTinyMCE(div_id,text_length){jQuery('.editor-error, .editor-success, #'+div_id+' .help-block').hide();jQuery('#'+div_id).removeClass('has-error');jQuery('#'+div_id).removeClass('has-success');var form_id=jQuery('#'+div_id).closest('form').attr('id');if(text_length<550){console.log('in submit if');jQuery('#'+div_id).addClass('has-error');jQuery('.editor-error').show();jQuery('#'+div_id+' .help-block').show();jQuery('form#'+form_id+' button[type="submit"]').prop('disabled',!0);return!1}else{console.log('in submit else');jQuery('#'+div_id).addClass('has-success');jQuery('.editor-success').show();jQuery('form#'+form_id+' button[type="submit"]').prop('disabled',!1);return!0}}
function customValidation(_this,div_id,return_type){jQuery('#'+div_id).removeClass('has-success');jQuery('#'+div_id).removeClass('has-error');jQuery('#'+div_id+' .help-block, #'+div_id+' .glyphicon-ok, #'+div_id+' .glyphicon-remove').hide();jQuery('#'+div_id+' .glyphicon-ok').hide();var is_error='no';var value=jQuery(_this).val();if(value==''){jQuery('#'+div_id).addClass('has-error');jQuery('#'+div_id+' .help-block, #'+div_id+' .glyphicon-remove').show();is_error='yes'}if(jQuery(_this).attr('date-edarabia-url')=='true'&&(checkSpaces(value)===!0||validEdarabiaURL(value)===!1)){jQuery('#'+div_id).addClass('has-error');jQuery('#'+div_id+' .help-block, #'+div_id+' .glyphicon-remove').show();is_error='yes'}else if(value!=''){jQuery('#'+div_id).addClass('has-success');jQuery('#'+div_id+' .glyphicon-ok').show()}
if(return_type===!0){return is_error}}
function customValidationLoop(stop_further){var is_error='';jQuery('.custom_validation').each(function(index,element){var _this=jQuery(this);var div_id=_this.attr('id');_this.find('.validate_this').each(function(index,element){var this_obj=jQuery(this);this_obj_val=this_obj.val();if(this_obj_val==''){is_error=customValidation(this_obj,div_id,!0)}})});if(stop_further===!0){if(is_error=='yes')
return!1;return!0}}
function customValidationOfWholeRow(div_id,return_type){jQuery('#'+div_id).removeClass('has-success');jQuery('#'+div_id).removeClass('has-error');jQuery('#'+div_id+' .help-block, #'+div_id+' .glyphicon-ok, #'+div_id+' .glyphicon-remove').hide();jQuery('#'+div_id+' .glyphicon-ok').hide();var is_error='no';jQuery("#"+div_id).find("input, select").each(function(){if(jQuery(this).val()==''){jQuery('#'+div_id).addClass('has-error');jQuery('#'+div_id+' .help-block, #'+div_id+' .glyphicon-remove').show();is_error='yes'}});if(is_error=='no'){jQuery('#'+div_id).addClass('has-success');jQuery('#'+div_id+' .glyphicon-ok').show()}
if(return_type===!0){return is_error}}
function customValidationOfWholeRowLoop(stop_further){var is_error='';jQuery('.subj_price_detail_row').each(function(index,element){var _this=jQuery(this);var div_id=_this.attr('id');if(div_id!==undefined){is_error=customValidationOfWholeRow(div_id,!0)}else{is_error='yes'}});if(stop_further===!0){if(is_error=='yes')
return!1;return!0}}
function multiSelectCustomValidation(div_id,return_type){jQuery('#'+div_id).removeClass('has-success');jQuery('#'+div_id).removeClass('has-error');jQuery('#'+div_id+' button.btn-default').removeClass('has-success').removeClass('has-error');jQuery('#'+div_id+' .help-block, #'+div_id+' .form-control-feedback.glyphicon.glyphicon-ok, #'+div_id+' .form-control-feedback.glyphicon.glyphicon-remove').hide();jQuery('#'+div_id+' .form-control-feedback.glyphicon.glyphicon-ok').hide();var is_error='no';if(jQuery("#"+div_id+" option:selected").length==0){jQuery('#'+div_id).addClass('has-error');jQuery('#'+div_id+' .help-block, #'+div_id+' .form-control-feedback.glyphicon.glyphicon-remove').show();jQuery('#'+div_id+' button.btn-default').addClass('has-error');is_error='yes'}else{jQuery('#'+div_id).addClass('has-success');jQuery('#'+div_id+' .form-control-feedback.glyphicon.glyphicon-ok').show();jQuery('#'+div_id+' button.btn-default').addClass('has-success')}
if(return_type===!0){return is_error}}
function multiSelectCustomValidationLoop(stop_further){var is_error='';jQuery('.multi_custom_validation').each(function(index,element){var _this=jQuery(this);var div_id=_this.attr('id');_this.find('.validate_this').each(function(index,element){var this_obj=jQuery(this);var field_id=this_obj.attr('id');is_error=multiSelectCustomValidation(div_id,!0)})});if(stop_further===!0){if(is_error=='yes')
return!1;return!0}}
function dynemicMultiSelectCustomValidationLoop(stop_further,identifier){var is_error='';jQuery(identifier).each(function(index,element){var _this=jQuery(this);var div_id=_this.attr('id');_this.find('.validate_this').each(function(index,element){var this_obj=jQuery(this);var field_id=this_obj.attr('id');is_error=multiSelectCustomValidation(div_id,!0)})});if(stop_further===!0){if(is_error=='yes')
return!1;return!0}}
function validEdarabiaURL(myURL){if(wpUrl.substr(-1)!=='/'){wpUrl=wpUrl+'/'}
var get_extra_params=myURL.split(wpUrl);if(get_extra_params[0]==''&&get_extra_params[1]!='')
get_extra_params=!0;else get_extra_params=!1;return get_extra_params}
function checkSpaces(str){return/\s/.test(str)}
function existingListingValidationLoop(stop_further){var error=!1;jQuery('.comp_exst_list_row').each(function(index,element){var _this=jQuery(this);_this.find('.validate_this_list_url').each(function(index,element){var this_obj=jQuery(this);this_obj_val=this_obj.val();var edarabia_url_attr=this_obj.attr('date-edarabia-url');if(this_obj_val==''){error=!0;existingListingValidation(this_obj)}else if(typeof edarabia_url_attr!==typeof undefined&&edarabia_url_attr!==!1){if(this_obj_val==''&&(checkSpaces(this_obj_val)===!0||validEdarabiaURL(this_obj_val)===!1)){error=!0;existingListingValidation(this_obj)}}})});if(stop_further===!0&&error===!0){return!1}}
function loggedinUserExtListValidationLoop(stop_further){var error=!1;jQuery('.comp_exst_list_row').each(function(index,element){var _this=jQuery(this);_this.find('.validate_this_list_url').each(function(index,element){var this_obj=jQuery(this);this_obj_val=this_obj.val();var edarabia_url_attr=this_obj.attr('date-edarabia-url');if(this_obj_val==''){error=!0;existingListingValidation(this_obj)}else if(typeof edarabia_url_attr!==typeof undefined&&edarabia_url_attr!==!1){if(this_obj_val==''&&(checkSpaces(this_obj_val)===!0||validEdarabiaURL(this_obj_val)===!1)){error=!0;existingListingValidation(this_obj)}}})});if(stop_further===!0&&error===!0){return!1}}
function existingListingValidation(_this,class_name){var custom_validation=_this.closest('.custom_validation');var formID=_this.closest('form').attr('id');custom_validation.addClass('has-success');custom_validation.removeClass('has-error');custom_validation.find('.glyphicon-remove, .help-block').hide();custom_validation.find('.glyphicon-ok').show();custom_validation.find('.glyphicon-refresh').hide();var send_ajax=_this.attr('data-send-ajax');var value=jQuery(_this).val();jQuery('form#'+formID+' button[type="submit"]').prop('disabled',!1);if(value==''){custom_validation.removeClass('has-success');custom_validation.addClass('has-error');custom_validation.find('.help-block, .glyphicon-remove').show();custom_validation.find('.glyphicon-ok').hide();jQuery('form#'+formID+' button[type="submit"]').prop('disabled',!0)}else if(value!=''&&jQuery(_this).attr('date-edarabia-url')=='true'&&(checkSpaces(value)===!0||validEdarabiaURL(value)===!1)){custom_validation.removeClass('has-success');custom_validation.addClass('has-error');custom_validation.find('.help-block, .glyphicon-remove').show();custom_validation.find('.glyphicon-ok').hide();jQuery('form#'+formID+' button[type="submit"]').prop('disabled',!0)}else if(value!=''&&typeof send_ajax!==typeof undefined&&send_ajax!==!1){jQuery('form#'+formID+' button[type="submit"]').prop('disabled',!0);custom_validation.find('.glyphicon-refresh').show();custom_validation.removeClass('has-success');custom_validation.removeClass('has-error');custom_validation.find('.glyphicon-ok, .glyphicon-remove').hide();jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=is_existing_listing_claimed",type:'POST',dataType:"json",data:'listing_url='+value,success:function(data){custom_validation.find('.glyphicon-refresh').hide();if(data.status=='fail'){custom_validation.addClass('has-error');custom_validation.find('.ajax-message, .glyphicon-remove').show();custom_validation.find('.ajax-message').html(data.message);custom_validation.find('.glyphicon-ok').hide();jQuery('form#'+formID+' button[type="submit"]').prop('disabled',!0)}else{custom_validation.addClass('has-success');custom_validation.find('.glyphicon-ok').show();custom_validation.find('.ajax-message').hide().html('');jQuery('form#'+formID+' button[type="submit"]').prop('disabled',!1)}}})}}
function addMoreCompExistListing(element){var newElement=element.clone();if(jQuery('input',newElement).val()!=''&&jQuery('input',newElement).val()!=wpUrl+'/'){jQuery('input',newElement).attr("value",'');jQuery('input',newElement).attr("placeholder",wpUrl+'example-school/')}else{jQuery('input',newElement).attr("value",'');jQuery('input',newElement).attr("placeholder",wpUrl+'example-school/')}
newElement.find('.has-success').removeClass('has-success');newElement.find('.has-error').removeClass('has-error');newElement.find('.glyphicon-ok, .glyphicon-remove, .help-block').hide();newElement.appendTo(jQuery(".comp_exst_list_wrapper"))}
function internalServerErrorMesg(formID,refreshURL,className,beforeThisForm,btn_text='',scroll_top=0,message_text=''){if(beforeThisForm=='')
beforeThisForm=!1;jQuery('.server-error').remove();if(beforeThisForm===!0){if(jQuery(formID+" input[type=submit]").length>1){jQuery('form'+formID+' input[type=submit]').prop('disabled',!1).css('opacity','1').html(btn_text)}else if(jQuery(formID+" button[type=submit]").length>1){jQuery('form'+formID+' button').prop('disabled',!1).css('opacity','1').html(btn_text)}
target_container=formID}else{jQuery('form'+formID+' button[type="submit"]').prop('disabled',!1).css('opacity','1').html('Submit');target_container=".top-information"}
if(message_text!=''){jQuery(target_container).before('<div class="server-error alert '+className+'">'+message_text+'</div>')}else{jQuery(target_container).before('<div class="server-error alert '+className+'">Some error occurred. Please try again or <a href="'+refreshURL+'">Click here</a> to refresh the page and try again.</div>')}
jQuery("html, body").stop().animate({scrollTop:scroll_top},500,'swing')}
function addRemoveSubjectsPriceDetailRows(newValue,selected_value,selected_text){if(newValue==!0){console.log('1');if(jQuery('.subj_price_detail_row:first').attr('id')===undefined){element=jQuery('.subj_price_detail_row');jQuery('.subj_price_detail_row').remove()}else{element=jQuery('.subj_price_detail_row:first')}
var newElement=element.clone();newElement.attr('id','subj_price_detail_row_'+selected_value);newElement.find('.glyphicon-ok, .glyphicon-remove, .help-block').hide();var set_field_name='your_fields[sbj_wise_price]['+selected_value+']';jQuery('.cat_name',newElement).attr({'value':selected_text,'placeholder':selected_text,'name':set_field_name+'[cat_name]',});jQuery('.price',newElement).attr({'value':'','placeholder':'Price','name':set_field_name+'[price]',});jQuery('.currency',newElement).attr({'name':set_field_name+'[currency]',}).find('option:eq(0)').prop('selected',!0);jQuery('.price_base',newElement).attr({'name':set_field_name+'[price_base]',}).find('option:eq(0)').prop('selected',!0);newElement.appendTo(jQuery("#subjects_price_detail"));jQuery('.show_and_hide').show();jQuery("#subjects_price_detail").find("#subj_price_detail_row_"+selected_value).removeClass('has-success');jQuery("#subjects_price_detail").find("#subj_price_detail_row_"+selected_value).removeClass('has-error')}else{console.log('2');if(jQuery('.subj_price_detail_row').length==1){console.log('3');element=jQuery('.subj_price_detail_row');var newElement=element.clone();newElement.removeAttr('id');jQuery('input',newElement).attr({'value':'','placeholder':'','name':''});jQuery('select',newElement).attr({'name':''}).find('option:eq(0)').prop('selected',!0);jQuery('#subj_price_detail_row_'+selected_value).remove();newElement.appendTo(jQuery("#subjects_price_detail"));jQuery('.show_and_hide').hide();jQuery('.subj_price_detail_row').addClass('show_and_hide')}else{jQuery('#subj_price_detail_row_'+selected_value).remove()}}}
function addMoreAccountsRows(element){var row_counter=jQuery('.row_counter').val();row_counter++;jQuery('.row_counter').val(row_counter);var newElement=element.clone();jQuery('.user_email',newElement).attr({value:'',name:'accounts[email]['+row_counter+']'});jQuery('.user_password',newElement).attr({value:'',name:'accounts[password]['+row_counter+']'});jQuery('.listing_id',newElement).attr({name:'accounts[listing_id]['+row_counter+'][]',checked:!1});newElement.appendTo(jQuery(".multi_users_accounts_wrapper"))}
function arrayRemove(arr,value){return arr.filter(function(ele){return ele!=value})}
function calculateTime(){var date_before=new Date();date_before.setMinutes(date_before.getMinutes()+10);var countDownDate=new Date(date_before).getTime();var countDownDate=new Date(countDownDate).getTime();var x=setInterval(function(){var now=new Date().getTime();var now=new Date(now).getTime();var distance=countDownDate-now;var minutes=Math.floor((distance%(1000*60*60))/(1000*60));var seconds=Math.floor((distance%(1000*60))/1000);jQuery('.check-out-detail .timer').html(minutes+"m "+seconds+"s ");if(distance<0){clearInterval(x);jQuery('.checkout-clock').html('<div class="alert alert-warning"><h3>Time Limit Reached</h3><p>Your reservation has been released. Please re-start your purchase.</p></div>');jQuery('#do-payment').remove();setTimeout(function(){window.location.replace(window.location.href)},2000)}},1000)}
function validateSingleYoutubeVideoURL(_this){var form_id=jQuery(_this).closest('form').attr('id');var custom_validation=jQuery(_this).closest('.videos_custom_validation');var video=jQuery(_this).val();custom_validation.removeClass('has-success');custom_validation.removeClass('has-error');custom_validation.find('.glyphicon-remove, .help-block').hide();custom_validation.find('.glyphicon-ok').hide();custom_validation.find('.glyphicon-refresh').hide();if(video!=''){var regExp=/^(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?(?=.*v=((\w|-){11}))(?:\S+)?$/;if(regExp.test(video)){custom_validation.addClass('has-success');custom_validation.find('.glyphicon-ok').show();jQuery('form#'+form_id+' button[type="submit"]').prop('disabled',!1).css('opacity','1').html('Submit');return!0}else{custom_validation.addClass('has-error');custom_validation.find('.glyphicon-remove, .help-block').show();custom_validation.find('.glyphicon-refresh').show();jQuery('form#'+form_id+' button[type="submit"]').prop('disabled',!1).css('opacity','1').html('Submit');return!1}}else{custom_validation.addClass('has-success');custom_validation.find('.glyphicon-ok').show();jQuery('form#'+form_id+' button[type="submit"]').prop('disabled',!1).css('opacity','1').html('Submit');return!0}}
function validateYoutubeVideoURLs(){error=!0;jQuery("form").find(".validate_this_video").each(function(){var _this=jQuery(this);var is_valid=validateSingleYoutubeVideoURL(_this);if(is_valid===!1){error=!1}});return error}
function validate_email(email){if(email!=''){var pattern=/[A-Z0-9._%+-]+@[A-Z0-9.-]+.[A-Z]{2,4}/igm;if(!pattern.test(email)){return!1}else{return!0}}else{return!1}}
function is_valid_domain_name(domain_name){if(domain_name!=''){var domains=['gmail.com','yahoo.com','hotmail.com','aol.com','hotmail.co.uk','hotmail.fr','msn.com','yahoo.fr','wanadoo.fr','orange.fr','comcast.net','yahoo.co.uk','yahoo.com.br','yahoo.co.in','live.com','rediffmail.com','free.fr','gmx.de','web.de','yandex.ru','ymail.com','libero.it','outlook.com','uol.com.br','bol.com.br','mail.ru','cox.net','hotmail.it','sbcglobal.net','sfr.fr','live.fr','verizon.net','live.co.uk','googlemail.com','yahoo.es','ig.com.br','live.nl','bigpond.com','terra.com.br','yahoo.it','neuf.fr','yahoo.de','alice.it','rocketmail.com','att.net','laposte.net','facebook.com','bellsouth.net','yahoo.in','hotmail.es','charter.net','yahoo.ca','yahoo.com.au','rambler.ru','hotmail.de','tiscali.it','shaw.ca','yahoo.co.jp','sky.com','earthlink.net','optonline.net','freenet.de','t-online.de','aliceadsl.fr','virgilio.it','home.nl','qq.com','telenet.be','me.com','yahoo.com.ar','tiscali.co.uk','yahoo.com.mx','voila.fr','gmx.net','mail.com','planet.nl','tin.it','live.it','ntlworld.com','arcor.de','yahoo.co.id','frontiernet.net','hetnet.nl','live.com.au','yahoo.com.sg','zonnet.nl','club-internet.fr','juno.com','optusnet.com.au','blueyonder.co.uk','bluewin.ch','skynet.be','sympatico.ca','windstream.net','mac.com','centurytel.net','chello.nl','live.ca','aim.com','bigpond.net.au'];if(jQuery.inArray(domain_name,domains)===-1){return!0}}
return!1}
;