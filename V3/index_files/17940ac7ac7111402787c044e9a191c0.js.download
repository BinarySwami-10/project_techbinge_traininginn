jQuery(document).ready(function(){if(jQuery('#providerSignupForm').length){jQuery('#providerSignupForm').bootstrapValidator({live:'enabled',message:'This value is not valid',submitButton:'$providerSignupForm button[type="submit"]',submitHandler:function(validator,form,submitButton){var $form=jQuery(form),formData=new FormData(),params=$form.serializeArray();jQuery.each(params,function(i,val){formData.append(val.name,val.value)});var btn_text=jQuery('form#providerSignupForm button[type="submit"]').html();refreshURL=window.location.href;jQuery('form#providerSignupForm button').prop('disabled',!0).css('opacity','0.5').html('Submitting...');jQuery('#provider-form .error-message').html('').hide();jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=submit_providerSignupForm",type:'POST',dataType:"json",data:formData,processData:!1,contentType:!1,success:function(data){if(data.status=='success'){window.location=siteUrl+"/thank-you-register/"}else{jQuery('form#providerSignupForm button').prop('disabled',!1).css('opacity','1').html('Register');if(data.message!=''&&data.message!==typeof undefined){jQuery('#provider-form .error-message').html(data.message).show()}else{jQuery('.login-error').show()}}},error:function(xhr,ajaxOptions,thrownError){internalServerErrorMesg('#providerSignupForm',refreshURL,'alert-warning',!0,btn_text);console.log(xhr.status);console.log(xhr.responseText);console.log(thrownError)}});return!1},feedbackIcons:{valid:'glyphicon glyphicon-ok',invalid:'glyphicon glyphicon-remove',validating:'glyphicon glyphicon-refresh'},fields:{user_firstname:{validators:{notEmpty:{message:'The First name is required and cannot be empty'}}},user_lastname:{validators:{notEmpty:{message:'The Last name is required and cannot be empty'}}},user_email:{validators:{notEmpty:{message:'The email address is required'},emailAddress:{message:'The input is not a valid email address'},callback:{message:'Please type another email address!',callback:function(value,validator){var match_with='';if(value.indexOf('@edarabia.com')==-1){match_with=value}
return value==match_with}}}},user_pass:{validators:{notEmpty:{message:'The password is required and cannot be empty'}}}}})}
if(jQuery('#editProviderProfileForm').length){jQuery("select[name='InsCountry'], select[name='InsCity']").on("change",function(){if(jQuery(this).val()=="other"){jQuery(".other-country-city").show()}else{jQuery(".other-country-city").hide()}});jQuery("#editProviderProfileForm").submit(function(e){e.preventDefault();if(jQuery("#providerCategories option:selected").length>0){customValidationOfWholeRowLoop(!1)}
if(jQuery(".tinyMCE").length&&!checkIE()){var data=CKEDITOR.instances.post_content.getData();var text=jQuery(data).text()}else{var text=jQuery("textarea#post_content").val()}
var text_length=text.length;customValidateTinyMCE('tinyMCE-div',text_length)});jQuery('#editProviderProfileForm').bootstrapValidator({live:'enabled',message:'This value is not valid',submitButton:'$editProviderProfileForm input[type="submit"]',submitHandler:function(validator,form,submitButton){if(jQuery(".tinyMCE").length&&!checkIE()){var data=CKEDITOR.instances.post_content.getData();var text=jQuery(data).text()}else{var text=jQuery("textarea#post_content").val()}
var text_length=text.length;var selected_provider_cat=jQuery("#providerCategories option:selected").length;if(selected_provider_cat>0&&(customValidationOfWholeRowLoop(!0)===!1||customValidateTinyMCE('tinyMCE-div',text_length)===!1)){jQuery('html, body').animate({scrollTop:jQuery("#tinyMCE-div").offset().top},500);jQuery('form#editProviderProfileForm button[type="submit"]').prop('disabled',!1).css('opacity','1').html('Update');return!1}else if(customValidateTinyMCE('tinyMCE-div',text_length)===!1){jQuery('html, body').animate({scrollTop:jQuery("#tinyMCE-div").offset().top},500);return!1}
var $form=jQuery(form),formData=new FormData(),params=$form.serializeArray(),picture=$form.find('[name="profile_picture"]')[0].files[0];var cats=[];jQuery.each(params,function(i,val){if(val.name!="post_content"&&val.value!=''){if(val.name=='providerCategories'){cats.push(val.value);formData.append(val.name,cats)}else{formData.append(val.name,val.value)}}});if(jQuery(".tinyMCE").length&&!checkIE()){var cont=CKEDITOR.instances.post_content.getData()}else{var cont=jQuery("textarea#post_content").val()}
formData.append('theContent',cont);formData.append('profile_picture',picture);var btn_text=jQuery('form#editProviderProfileForm input[type="submit"]').val();refreshURL=window.location.href;jQuery('form#editProviderProfileForm .glyphicon-ok').show();jQuery('form#editProviderProfileForm input[type="submit"]').prop('disabled',!0).css('opacity','0.5').val('Submitting...');jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=editProviderProfileForm",type:'POST',dataType:"json",data:formData,processData:!1,contentType:!1,success:function(data){if(data.status=='success'){internalServerErrorMesg('#editProviderProfileForm','','alert-success',!0,btn_text,0,data.message);if(data['goto']=='url'){setTimeout(function(){window.location=data.rd_url},1000);return!1}else if(data.profile_picture!=''){jQuery('.listing-logo img').attr('src',data.profile_picture)}
user_name=jQuery('input[name="user_firstname"]').val()+' '+jQuery('input[name="user_lastname"]').val();jQuery(".user-name-header").html(user_name)}else if(data.status=='false'&&data.message){internalServerErrorMesg('#editProviderProfileForm','','alert-danger',!0,btn_text,0,data.message)}
jQuery('form#editProviderProfileForm .glyphicon-ok').hide();jQuery('form#editProviderProfileForm div').removeClass('has-success');jQuery('form#editProviderProfileForm input[type="submit"]').prop('disabled',!1).css('opacity','1').val('Update')},error:function(xhr,ajaxOptions,thrownError){internalServerErrorMesg('#editProviderProfileForm',refreshURL,'alert-warning',!0,btn_text);console.log(xhr.status);console.log(xhr.responseText);console.log(thrownError)}});return!1},feedbackIcons:{valid:'glyphicon glyphicon-ok',invalid:'glyphicon glyphicon-remove',validating:'glyphicon glyphicon-refresh'},fields:{user_firstname:{validators:{notEmpty:{message:'The First name is required and cannot be empty'}}},user_lastname:{validators:{notEmpty:{message:'The Last name is required and cannot be empty'}}},gender:{validators:{notEmpty:{message:'The Gender is required and cannot be empty'}}},nationality:{validators:{notEmpty:{message:'The Nationality is required and cannot be empty'}}},InsCountry:{validators:{notEmpty:{message:'The Location Country is required and cannot be empty'}}},InsCity:{validators:{notEmpty:{message:'The Location Country is required and cannot be empty'}}},address:{validators:{notEmpty:{message:'The Address is required and cannot be empty'}}},profile_picture:{validators:{file:{extension:'jpeg,png,jpg',type:'image/jpeg,image/png',maxSize:1*1024*1024,message:'The selected picture is not valid, it should be .jpg/.png and 5 MB at maximum.'}}}}})}
if(jQuery('#providerRegEditCourse').length){jQuery("form#providerRegEditCourse .red-button").hide();jQuery("#providerRegEditCourse").submit(function(e){e.preventDefault();if(jQuery(".tinyMCE").length&&!checkIE()){var data=CKEDITOR.instances.content.getData();var text=jQuery(data).text()}else{var text=jQuery("textarea#content").val()}
var text_length=text.length;customValidateTinyMCE('tinyMCE-div',text_length)});jQuery('#providerRegEditCourse').bootstrapValidator({live:'enabled',excluded:[':disabled'],message:'This value is not valid',submitButton:'$providerRegEditCourse button[type="submit"]',submitHandler:function(validator,form,submitButton){if(jQuery(".tinyMCE").length&&!checkIE()){var data=CKEDITOR.instances.content.getData();var text=jQuery(data).text()}else{var text=jQuery("textarea#content").val()}
var text_length=text.length;if(customValidateTinyMCE('tinyMCE-div',text_length)===!1){jQuery('html, body').animate({scrollTop:jQuery("#tinyMCE-div").offset().top},500);return!1}
var $form=jQuery(form),formData=new FormData(),params=$form.serializeArray();var cats=[];jQuery.each(params,function(i,val){if(val.name!="content"&&val.value!=''){if(val.name=='courseCategories'){cats.push(val.value);formData.append(val.name,cats)}else{formData.append(val.name,val.value)}}});if(jQuery(".tinyMCE").length&&!checkIE()){var cont=CKEDITOR.instances.content.getData();var cont2=CKEDITOR.instances.about_instructor.getData()}else{var cont=jQuery("textarea#content").val();var cont2=jQuery("textarea#about_instructor").val()}
formData.append('theContent',cont);formData.append('about_instructor',cont2);jQuery('form#providerRegEditCourse button[type="submit"]').prop('disabled',!0).css('opacity','0.5').html('Submitting...');refreshURL=wpUrl+'/tutor-manage-courses/';jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=submit_providerCourseForm",type:'POST',data:formData,processData:!1,contentType:!1,success:function(data){var obj=JSON.parse(data);if(obj.status=='false'){internalServerErrorMesg('#providerRegEditCourse',refreshURL,'alert-info')}else{window.location=obj.rd_url}},error:function(xhr,ajaxOptions,thrownError){internalServerErrorMesg('#providerRegEditCourse',refreshURL,'alert-info');console.log(xhr.status);console.log(xhr.responseText);console.log(thrownError)}});return!1},feedbackIcons:{valid:'glyphicon glyphicon-ok',invalid:'glyphicon glyphicon-remove',validating:'glyphicon glyphicon-refresh'},fields:{company_listing:{validators:{notEmpty:{message:'Institute is required and cannot be empty'}}},courseTitle:{validators:{notEmpty:{message:'The title is required and cannot be empty'}}},courseCategories:{validators:{notEmpty:{message:'Category is required and cannot be empty'}}},courseSubCategories:{validators:{notEmpty:{message:'Sub Category is required and cannot be empty'}}},course_level:{validators:{notEmpty:{message:'The course level is required and cannot be empty'}}},InsCountry:{validators:{notEmpty:{message:'Country is required and cannot be empty'}}},InsCity:{validators:{notEmpty:{message:'City is required and cannot be empty'}}},featured_image:{validators:{file:{extension:'jpeg,jpg,png',type:'image/jpeg,image/png',maxSize:1048576,message:'The selected picture is not valid, it should be .jpg/.png and 1 MB at maximum.'},callback:{message:'Please select an image',callback:function(value,validator){if(jQuery(".ftd_img_preview .img-thumbnail").length){return!0}else{if(jQuery(".ftd_img_upload").val()){return!0}else{return!1}}}}}},start_date:{validators:{notEmpty:{message:'Start date is required and cannot be empty'},date:{format:'YY-MM-DD',message:'The format is YY-MM-DD'}}},end_date:{validators:{notEmpty:{message:'End date is required and cannot be empty'},date:{format:'YY-MM-DD',message:'The format is YY-MM-DD'}}},offer_at:{validators:{notEmpty:{message:'The course offered at is required and cannot be empty'}}},email:{validators:{notEmpty:{message:'The email address is required'}}},website:{validators:{notEmpty:{message:'The website address is required'},uri:{message:'The website address is not valid'}}},start_day:{validators:{notEmpty:{message:'The start day is required'},}},end_day:{validators:{notEmpty:{message:'The end day is required'},}},start_time:{validators:{notEmpty:{message:'The start time is required'},}},end_time:{validators:{notEmpty:{message:'The end time is required'},}},minimum_fees:{validators:{notEmpty:{message:'The minimum fees is required and cannot be empty'}}},maximum_fees:{validators:{notEmpty:{message:'The maximum fees is required and cannot be empty'}}},fees_currency:{validators:{notEmpty:{message:'The fees currency is required and cannot be empty'}}},info_check:{validators:{notEmpty:{message:'Confirm form information'}}}}})}
jQuery('.reg-action-btns a').on("click",function(e){e.preventDefault();jQuery('.reg-action-btns a').removeClass('active');jQuery(this).addClass('active');var form_id=jQuery(this).attr('data-form-id');jQuery('.regisration-form').hide();jQuery(form_id).show();jQuery('.toggle-content-box').show()});jQuery('.delete-provider-profile').on('click',function(){jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=deleteProviderProfile",type:'POST',beforeSend:function(){jQuery('.error_message').hide();jQuery('.delete-profile').prop('disabled',!0).css('opacity','0.5').text('Deleting...');jQuery('.cancel_profile_deletion_btn').prop('disabled',!0).css('opacity','0.5')},success:function(data){jQuery('.delete-profile').prop('disabled',!1).css('opacity','1').text('Yes');jQuery('.cancel_profile_deletion_btn').prop('disabled',!1).css('opacity','1');if(data=='done'){jQuery('body').remove();window.location.href=siteUrl+'/tutors';jQuery('#deleteProfileConfirmModal').modal('toggle')}else{jQuery('.error_message').show()}},error:function(xhr,ajaxOptions,thrownError){console.log(xhr.status);console.log(xhr.responseText);console.log(thrownError)}})});jQuery("#managePreferredDaysOrTimingsForm").submit(function(e){e.preventDefault();var preferred_type=jQuery("input[name='preferred_type']").val();jQuery('form#managePreferredDaysOrTimingsForm input[type="submit"]').prop('disabled',!0).css('opacity','0.5').val('Submitting...');jQuery.ajax({type:'POST',dataType:"json",url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=managePreferredDaysOrTimings",data:jQuery('#managePreferredDaysOrTimingsForm').serialize(),success:function(data){if(data.status=='success'){var record=data.record;if(record.length>0){jQuery('.preferred_'+preferred_type+'_listing').find('p').removeClass('active')
for(var i=0;i<record.length;i++){jQuery(".preferred_"+preferred_type+"_listing p:contains('"+record[i]+"')").addClass('active')}}
internalServerErrorMesg('.preferred_'+preferred_type+'_listing .message','','alert-success',!0,'',250,'Profile updated')}else{internalServerErrorMesg('.preferred_'+preferred_type+'_listing .message','','alert-danger',!0,'',250,'Profile not updated please try again.')}
jQuery('form#managePreferredDaysOrTimingsForm input[type="submit"]').prop('disabled',!1).css('opacity','1').val('Save');jQuery('#managePreferredDaysOrTimings').modal('toggle')},error:function(xhr,ajaxOptions,thrownError){console.log(xhr.status);console.log(xhr.responseText);console.log(thrownError)}})});if(jQuery('#manageTutorCoursesOnOfferForm').length){jQuery("#manageTutorCoursesOnOfferForm").submit(function(e){e.preventDefault();if(jQuery("#providerCategories option:selected").length>0){customValidationOfWholeRowLoop(!1)}});jQuery('#manageTutorCoursesOnOfferForm').bootstrapValidator({live:'enabled',message:'This value is not valid',submitButton:'$manageTutorCoursesOnOfferForm input[type="submit"]',submitHandler:function(validator,form,submitButton){var selected_provider_cat=jQuery("#providerCategories option:selected").length;if(selected_provider_cat>0&&customValidationOfWholeRowLoop(!0)===!1){jQuery('form#editProviderProfileForm button[type="submit"]').prop('disabled',!1).css('opacity','1').html('Update');return!1}
var $form=jQuery(form),formData=new FormData(),params=$form.serializeArray();var cats=[];jQuery.each(params,function(i,val){if(val.name=='providerCategories'){cats.push(val.value);formData.append(val.name,cats)}else{formData.append(val.name,val.value)}});refreshURL=window.location.href;jQuery('form#manageTutorCoursesOnOfferForm .glyphicon-ok').show();jQuery('form#manageTutorCoursesOnOfferForm input[type="submit"]').prop('disabled',!0).css('opacity','0.5').val('Submitting...');jQuery.ajax({url:templateUrl+"/user-management/inc/user-ajax-functions.php?fun=manageTutorCoursesOnOffer",type:'POST',dataType:"json",data:formData,processData:!1,contentType:!1,success:function(data){if(data.status=='success'){var record=data.record;if(record.length>0){var make_html='';for(var i=0;i<record.length;i++){make_html+='<tr>';make_html+='<td>'+record[i].cat_name+'</td>';make_html+='<td>'+record[i].currency+' '+record[i].price+' / '+record[i].price_base+'</td>';make_html+='</tr>'}
jQuery("#course_wrapper tbody").html(make_html)}
internalServerErrorMesg('.tutor_courses_message','','alert-success',!0,'',0,'Record Updated')}
jQuery('#manageCoursesMdel').modal('toggle');jQuery('form#manageTutorCoursesOnOfferForm .glyphicon-ok').hide();jQuery('form#manageTutorCoursesOnOfferForm div').removeClass('has-success');jQuery('form#manageTutorCoursesOnOfferForm input[type="submit"]').prop('disabled',!1).css('opacity','1').val('Update')},error:function(xhr,ajaxOptions,thrownError){internalServerErrorMesg('.tutor_courses_message',refreshURL,'alert-warning',!0,'');console.log(xhr.status);console.log(xhr.responseText);console.log(thrownError)}});return!1},feedbackIcons:{valid:'glyphicon glyphicon-ok',invalid:'glyphicon glyphicon-remove',validating:'glyphicon glyphicon-refresh'},fields:{}})}})
;